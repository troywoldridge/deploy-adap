"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@algolia+client-search@4.24.0";
exports.ids = ["vendor-chunks/@algolia+client-search@4.24.0"];
exports.modules = {

/***/ "(ssr)/./node_modules/.pnpm/@algolia+client-search@4.24.0/node_modules/@algolia/client-search/dist/client-search.esm.js":
/*!************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@algolia+client-search@4.24.0/node_modules/@algolia/client-search/dist/client-search.esm.js ***!
  \************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ApiKeyACLEnum: () => (/* binding */ ApiKeyACLEnum),\n/* harmony export */   BatchActionEnum: () => (/* binding */ BatchActionEnum),\n/* harmony export */   ScopeEnum: () => (/* binding */ ScopeEnum),\n/* harmony export */   StrategyEnum: () => (/* binding */ StrategyEnum),\n/* harmony export */   SynonymEnum: () => (/* binding */ SynonymEnum),\n/* harmony export */   addApiKey: () => (/* binding */ addApiKey),\n/* harmony export */   assignUserID: () => (/* binding */ assignUserID),\n/* harmony export */   assignUserIDs: () => (/* binding */ assignUserIDs),\n/* harmony export */   batch: () => (/* binding */ batch),\n/* harmony export */   browseObjects: () => (/* binding */ browseObjects),\n/* harmony export */   browseRules: () => (/* binding */ browseRules),\n/* harmony export */   browseSynonyms: () => (/* binding */ browseSynonyms),\n/* harmony export */   chunkedBatch: () => (/* binding */ chunkedBatch),\n/* harmony export */   clearDictionaryEntries: () => (/* binding */ clearDictionaryEntries),\n/* harmony export */   clearObjects: () => (/* binding */ clearObjects),\n/* harmony export */   clearRules: () => (/* binding */ clearRules),\n/* harmony export */   clearSynonyms: () => (/* binding */ clearSynonyms),\n/* harmony export */   copyIndex: () => (/* binding */ copyIndex),\n/* harmony export */   copyRules: () => (/* binding */ copyRules),\n/* harmony export */   copySettings: () => (/* binding */ copySettings),\n/* harmony export */   copySynonyms: () => (/* binding */ copySynonyms),\n/* harmony export */   createBrowsablePromise: () => (/* binding */ createBrowsablePromise),\n/* harmony export */   createMissingObjectIDError: () => (/* binding */ createMissingObjectIDError),\n/* harmony export */   createObjectNotFoundError: () => (/* binding */ createObjectNotFoundError),\n/* harmony export */   createSearchClient: () => (/* binding */ createSearchClient),\n/* harmony export */   createValidUntilNotFoundError: () => (/* binding */ createValidUntilNotFoundError),\n/* harmony export */   customRequest: () => (/* binding */ customRequest),\n/* harmony export */   deleteApiKey: () => (/* binding */ deleteApiKey),\n/* harmony export */   deleteBy: () => (/* binding */ deleteBy),\n/* harmony export */   deleteDictionaryEntries: () => (/* binding */ deleteDictionaryEntries),\n/* harmony export */   deleteIndex: () => (/* binding */ deleteIndex),\n/* harmony export */   deleteObject: () => (/* binding */ deleteObject),\n/* harmony export */   deleteObjects: () => (/* binding */ deleteObjects),\n/* harmony export */   deleteRule: () => (/* binding */ deleteRule),\n/* harmony export */   deleteSynonym: () => (/* binding */ deleteSynonym),\n/* harmony export */   exists: () => (/* binding */ exists),\n/* harmony export */   findAnswers: () => (/* binding */ findAnswers),\n/* harmony export */   findObject: () => (/* binding */ findObject),\n/* harmony export */   generateSecuredApiKey: () => (/* binding */ generateSecuredApiKey),\n/* harmony export */   getApiKey: () => (/* binding */ getApiKey),\n/* harmony export */   getAppTask: () => (/* binding */ getAppTask),\n/* harmony export */   getDictionarySettings: () => (/* binding */ getDictionarySettings),\n/* harmony export */   getLogs: () => (/* binding */ getLogs),\n/* harmony export */   getObject: () => (/* binding */ getObject),\n/* harmony export */   getObjectPosition: () => (/* binding */ getObjectPosition),\n/* harmony export */   getObjects: () => (/* binding */ getObjects),\n/* harmony export */   getRule: () => (/* binding */ getRule),\n/* harmony export */   getSecuredApiKeyRemainingValidity: () => (/* binding */ getSecuredApiKeyRemainingValidity),\n/* harmony export */   getSettings: () => (/* binding */ getSettings),\n/* harmony export */   getSynonym: () => (/* binding */ getSynonym),\n/* harmony export */   getTask: () => (/* binding */ getTask),\n/* harmony export */   getTopUserIDs: () => (/* binding */ getTopUserIDs),\n/* harmony export */   getUserID: () => (/* binding */ getUserID),\n/* harmony export */   hasPendingMappings: () => (/* binding */ hasPendingMappings),\n/* harmony export */   initIndex: () => (/* binding */ initIndex),\n/* harmony export */   listApiKeys: () => (/* binding */ listApiKeys),\n/* harmony export */   listClusters: () => (/* binding */ listClusters),\n/* harmony export */   listIndices: () => (/* binding */ listIndices),\n/* harmony export */   listUserIDs: () => (/* binding */ listUserIDs),\n/* harmony export */   moveIndex: () => (/* binding */ moveIndex),\n/* harmony export */   multipleBatch: () => (/* binding */ multipleBatch),\n/* harmony export */   multipleGetObjects: () => (/* binding */ multipleGetObjects),\n/* harmony export */   multipleQueries: () => (/* binding */ multipleQueries),\n/* harmony export */   multipleSearchForFacetValues: () => (/* binding */ multipleSearchForFacetValues),\n/* harmony export */   partialUpdateObject: () => (/* binding */ partialUpdateObject),\n/* harmony export */   partialUpdateObjects: () => (/* binding */ partialUpdateObjects),\n/* harmony export */   removeUserID: () => (/* binding */ removeUserID),\n/* harmony export */   replaceAllObjects: () => (/* binding */ replaceAllObjects),\n/* harmony export */   replaceAllRules: () => (/* binding */ replaceAllRules),\n/* harmony export */   replaceAllSynonyms: () => (/* binding */ replaceAllSynonyms),\n/* harmony export */   replaceDictionaryEntries: () => (/* binding */ replaceDictionaryEntries),\n/* harmony export */   restoreApiKey: () => (/* binding */ restoreApiKey),\n/* harmony export */   saveDictionaryEntries: () => (/* binding */ saveDictionaryEntries),\n/* harmony export */   saveObject: () => (/* binding */ saveObject),\n/* harmony export */   saveObjects: () => (/* binding */ saveObjects),\n/* harmony export */   saveRule: () => (/* binding */ saveRule),\n/* harmony export */   saveRules: () => (/* binding */ saveRules),\n/* harmony export */   saveSynonym: () => (/* binding */ saveSynonym),\n/* harmony export */   saveSynonyms: () => (/* binding */ saveSynonyms),\n/* harmony export */   search: () => (/* binding */ search),\n/* harmony export */   searchDictionaryEntries: () => (/* binding */ searchDictionaryEntries),\n/* harmony export */   searchForFacetValues: () => (/* binding */ searchForFacetValues),\n/* harmony export */   searchRules: () => (/* binding */ searchRules),\n/* harmony export */   searchSynonyms: () => (/* binding */ searchSynonyms),\n/* harmony export */   searchUserIDs: () => (/* binding */ searchUserIDs),\n/* harmony export */   setDictionarySettings: () => (/* binding */ setDictionarySettings),\n/* harmony export */   setSettings: () => (/* binding */ setSettings),\n/* harmony export */   updateApiKey: () => (/* binding */ updateApiKey),\n/* harmony export */   waitAppTask: () => (/* binding */ waitAppTask),\n/* harmony export */   waitTask: () => (/* binding */ waitTask)\n/* harmony export */ });\n/* harmony import */ var _algolia_client_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @algolia/client-common */ \"(ssr)/./node_modules/.pnpm/@algolia+client-common@4.24.0/node_modules/@algolia/client-common/dist/client-common.esm.js\");\n/* harmony import */ var _algolia_transporter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @algolia/transporter */ \"(ssr)/./node_modules/.pnpm/@algolia+transporter@4.24.0/node_modules/@algolia/transporter/dist/transporter.esm.js\");\n/* harmony import */ var _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @algolia/requester-common */ \"(ssr)/./node_modules/.pnpm/@algolia+requester-common@4.24.0/node_modules/@algolia/requester-common/dist/requester-common.esm.js\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_0__);\n\n\n\n\n\nfunction createBrowsablePromise(options) {\r\n    const browse = (data) => {\r\n        return options.request(data).then(response => {\r\n            /**\r\n             * First we send to the developer the\r\n             * batch retrieved from the API.\r\n             */\r\n            if (options.batch !== undefined) {\r\n                options.batch(response.hits);\r\n            }\r\n            /**\r\n             * Then, we ask to the browse concrete implementation\r\n             * if we should stop browsing. As example, the `browseObjects`\r\n             * method will stop if the cursor is not present on the response.\r\n             */\r\n            if (options.shouldStop(response)) {\r\n                return undefined;\r\n            }\r\n            /**\r\n             * Finally, if the response contains a cursor, we browse to the next\r\n             * batch using that same cursor. Otherwise, we just use the traditional\r\n             * browsing using the page element.\r\n             */\r\n            if (response.cursor) {\r\n                return browse({\r\n                    cursor: response.cursor,\r\n                });\r\n            }\r\n            return browse({\r\n                page: (data.page || 0) + 1,\r\n            });\r\n        });\r\n    };\r\n    return browse({});\r\n}\n\nconst createSearchClient = options => {\r\n    const appId = options.appId;\r\n    const auth = (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createAuth)(options.authMode !== undefined ? options.authMode : _algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.AuthMode.WithinHeaders, appId, options.apiKey);\r\n    const transporter = (0,_algolia_transporter__WEBPACK_IMPORTED_MODULE_2__.createTransporter)({\r\n        hosts: [\r\n            { url: `${appId}-dsn.algolia.net`, accept: _algolia_transporter__WEBPACK_IMPORTED_MODULE_2__.CallEnum.Read },\r\n            { url: `${appId}.algolia.net`, accept: _algolia_transporter__WEBPACK_IMPORTED_MODULE_2__.CallEnum.Write },\r\n        ].concat((0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.shuffle)([\r\n            { url: `${appId}-1.algolianet.com` },\r\n            { url: `${appId}-2.algolianet.com` },\r\n            { url: `${appId}-3.algolianet.com` },\r\n        ])),\r\n        ...options,\r\n        headers: {\r\n            ...auth.headers(),\r\n            ...{ 'content-type': 'application/x-www-form-urlencoded' },\r\n            ...options.headers,\r\n        },\r\n        queryParameters: {\r\n            ...auth.queryParameters(),\r\n            ...options.queryParameters,\r\n        },\r\n    });\r\n    const base = {\r\n        transporter,\r\n        appId,\r\n        addAlgoliaAgent(segment, version) {\r\n            transporter.userAgent.add({ segment, version });\r\n        },\r\n        clearCache() {\r\n            return Promise.all([\r\n                transporter.requestsCache.clear(),\r\n                transporter.responsesCache.clear(),\r\n            ]).then(() => undefined);\r\n        },\r\n    };\r\n    return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.addMethods)(base, options.methods);\r\n};\n\nfunction createMissingObjectIDError() {\r\n    return {\r\n        name: 'MissingObjectIDError',\r\n        message: 'All objects must have an unique objectID ' +\r\n            '(like a primary key) to be valid. ' +\r\n            'Algolia is also able to generate objectIDs ' +\r\n            \"automatically but *it's not recommended*. \" +\r\n            \"To do it, use the `{'autoGenerateObjectIDIfNotExist': true}` option.\",\r\n    };\r\n}\n\nfunction createObjectNotFoundError() {\r\n    return {\r\n        name: 'ObjectNotFoundError',\r\n        message: 'Object not found.',\r\n    };\r\n}\n\nfunction createValidUntilNotFoundError() {\r\n    return {\r\n        name: 'ValidUntilNotFoundError',\r\n        message: 'ValidUntil not found in given secured api key.',\r\n    };\r\n}\n\nconst addApiKey = (base) => {\r\n    return (acl, requestOptions) => {\r\n        const { queryParameters, ...options } = requestOptions || {};\r\n        const data = {\r\n            acl,\r\n            ...(queryParameters !== undefined ? { queryParameters } : {}),\r\n        };\r\n        const wait = (response, waitRequestOptions) => {\r\n            return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createRetryablePromise)(retry => {\r\n                return getApiKey(base)(response.key, waitRequestOptions).catch((apiError) => {\r\n                    if (apiError.status !== 404) {\r\n                        throw apiError;\r\n                    }\r\n                    return retry();\r\n                });\r\n            });\r\n        };\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: '1/keys',\r\n            data,\r\n        }, options), wait);\r\n    };\r\n};\n\nconst assignUserID = (base) => {\r\n    return (userID, clusterName, requestOptions) => {\r\n        const mappedRequestOptions = (0,_algolia_transporter__WEBPACK_IMPORTED_MODULE_2__.createMappedRequestOptions)(requestOptions);\r\n        // eslint-disable-next-line functional/immutable-data\r\n        mappedRequestOptions.queryParameters['X-Algolia-User-ID'] = userID;\r\n        return base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: '1/clusters/mapping',\r\n            data: { cluster: clusterName },\r\n        }, mappedRequestOptions);\r\n    };\r\n};\n\nconst assignUserIDs = (base) => {\r\n    return (userIDs, clusterName, requestOptions) => {\r\n        return base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: '1/clusters/mapping/batch',\r\n            data: {\r\n                users: userIDs,\r\n                cluster: clusterName,\r\n            },\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst clearDictionaryEntries = (base) => {\r\n    return (dictionary, requestOptions) => {\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('/1/dictionaries/%s/batch', dictionary),\r\n            data: {\r\n                clearExistingDictionaryEntries: true,\r\n                requests: { action: 'addEntry', body: [] },\r\n            },\r\n        }, requestOptions), (response, waitRequestOptions) => waitAppTask(base)(response.taskID, waitRequestOptions));\r\n    };\r\n};\n\nconst copyIndex = (base) => {\r\n    return (from, to, requestOptions) => {\r\n        const wait = (response, waitRequestOptions) => {\r\n            return initIndex(base)(from, {\r\n                methods: { waitTask },\r\n            }).waitTask(response.taskID, waitRequestOptions);\r\n        };\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/indexes/%s/operation', from),\r\n            data: {\r\n                operation: 'copy',\r\n                destination: to,\r\n            },\r\n        }, requestOptions), wait);\r\n    };\r\n};\n\nconst copyRules = (base) => {\r\n    return (from, to, requestOptions) => {\r\n        return copyIndex(base)(from, to, {\r\n            ...requestOptions,\r\n            scope: [ScopeEnum.Rules],\r\n        });\r\n    };\r\n};\n\nconst copySettings = (base) => {\r\n    return (from, to, requestOptions) => {\r\n        return copyIndex(base)(from, to, {\r\n            ...requestOptions,\r\n            scope: [ScopeEnum.Settings],\r\n        });\r\n    };\r\n};\n\nconst copySynonyms = (base) => {\r\n    return (from, to, requestOptions) => {\r\n        return copyIndex(base)(from, to, {\r\n            ...requestOptions,\r\n            scope: [ScopeEnum.Synonyms],\r\n        });\r\n    };\r\n};\n\nconst customRequest = (base) => {\r\n    return (request, requestOptions) => {\r\n        if (request.method === _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Get) {\r\n            return base.transporter.read(request, requestOptions);\r\n        }\r\n        return base.transporter.write(request, requestOptions);\r\n    };\r\n};\n\nconst deleteApiKey = (base) => {\r\n    return (apiKey, requestOptions) => {\r\n        const wait = (_, waitRequestOptions) => {\r\n            return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createRetryablePromise)(retry => {\r\n                return getApiKey(base)(apiKey, waitRequestOptions)\r\n                    .then(retry)\r\n                    .catch((apiError) => {\r\n                    if (apiError.status !== 404) {\r\n                        throw apiError;\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Delete,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/keys/%s', apiKey),\r\n        }, requestOptions), wait);\r\n    };\r\n};\n\nconst deleteDictionaryEntries = (base) => {\r\n    return (dictionary, objectIDs, requestOptions) => {\r\n        const requests = objectIDs.map(objectID => ({\r\n            action: 'deleteEntry',\r\n            body: { objectID },\r\n        }));\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('/1/dictionaries/%s/batch', dictionary),\r\n            data: { clearExistingDictionaryEntries: false, requests },\r\n        }, requestOptions), (response, waitRequestOptions) => waitAppTask(base)(response.taskID, waitRequestOptions));\r\n    };\r\n};\n\nconst generateSecuredApiKey = () => {\r\n    return (parentApiKey, restrictions) => {\r\n        const queryParameters = (0,_algolia_transporter__WEBPACK_IMPORTED_MODULE_2__.serializeQueryParameters)(restrictions);\r\n        const securedKey = (0,crypto__WEBPACK_IMPORTED_MODULE_0__.createHmac)('sha256', parentApiKey)\r\n            .update(queryParameters)\r\n            .digest('hex');\r\n        return Buffer.from(securedKey + queryParameters).toString('base64');\r\n    };\r\n};\n\nconst getApiKey = (base) => {\r\n    return (apiKey, requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Get,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/keys/%s', apiKey),\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst getAppTask = (base) => {\r\n    return (taskID, requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Get,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/task/%s', taskID.toString()),\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst getDictionarySettings = (base) => {\r\n    return (requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Get,\r\n            path: '/1/dictionaries/*/settings',\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst getLogs = (base) => {\r\n    return (requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Get,\r\n            path: '1/logs',\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst getSecuredApiKeyRemainingValidity = () => {\r\n    return (securedApiKey) => {\r\n        const decodedString = Buffer.from(securedApiKey, 'base64').toString('ascii');\r\n        const regex = /validUntil=(\\d+)/;\r\n        const match = decodedString.match(regex);\r\n        if (match === null) {\r\n            throw createValidUntilNotFoundError();\r\n        }\r\n        return parseInt(match[1], 10) - Math.round(new Date().getTime() / 1000);\r\n    };\r\n};\n\nconst getTopUserIDs = (base) => {\r\n    return (requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Get,\r\n            path: '1/clusters/mapping/top',\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst getUserID = (base) => {\r\n    return (userID, requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Get,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/clusters/mapping/%s', userID),\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst hasPendingMappings = (base) => {\r\n    return (requestOptions) => {\r\n        const { retrieveMappings, ...options } = requestOptions || {};\r\n        if (retrieveMappings === true) {\r\n            // eslint-disable-next-line functional/immutable-data\r\n            options.getClusters = true;\r\n        }\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Get,\r\n            path: '1/clusters/mapping/pending',\r\n        }, options);\r\n    };\r\n};\n\nconst initIndex = (base) => {\r\n    return (indexName, options = {}) => {\r\n        const searchIndex = {\r\n            transporter: base.transporter,\r\n            appId: base.appId,\r\n            indexName,\r\n        };\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.addMethods)(searchIndex, options.methods);\r\n    };\r\n};\n\nconst listApiKeys = (base) => {\r\n    return (requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Get,\r\n            path: '1/keys',\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst listClusters = (base) => {\r\n    return (requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Get,\r\n            path: '1/clusters',\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst listIndices = (base) => {\r\n    return (requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Get,\r\n            path: '1/indexes',\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst listUserIDs = (base) => {\r\n    return (requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Get,\r\n            path: '1/clusters/mapping',\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst moveIndex = (base) => {\r\n    return (from, to, requestOptions) => {\r\n        const wait = (response, waitRequestOptions) => {\r\n            return initIndex(base)(from, {\r\n                methods: { waitTask },\r\n            }).waitTask(response.taskID, waitRequestOptions);\r\n        };\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/indexes/%s/operation', from),\r\n            data: {\r\n                operation: 'move',\r\n                destination: to,\r\n            },\r\n        }, requestOptions), wait);\r\n    };\r\n};\n\nconst multipleBatch = (base) => {\r\n    return (requests, requestOptions) => {\r\n        const wait = (response, waitRequestOptions) => {\r\n            return Promise.all(Object.keys(response.taskID).map(indexName => {\r\n                return initIndex(base)(indexName, {\r\n                    methods: { waitTask },\r\n                }).waitTask(response.taskID[indexName], waitRequestOptions);\r\n            }));\r\n        };\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: '1/indexes/*/batch',\r\n            data: {\r\n                requests,\r\n            },\r\n        }, requestOptions), wait);\r\n    };\r\n};\n\nconst multipleGetObjects = (base) => {\r\n    return (requests, requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: '1/indexes/*/objects',\r\n            data: {\r\n                requests,\r\n            },\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst multipleQueries = (base) => {\r\n    return (queries, requestOptions) => {\r\n        const requests = queries.map(query => {\r\n            return {\r\n                ...query,\r\n                params: (0,_algolia_transporter__WEBPACK_IMPORTED_MODULE_2__.serializeQueryParameters)(query.params || {}),\r\n            };\r\n        });\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: '1/indexes/*/queries',\r\n            data: {\r\n                requests,\r\n            },\r\n            cacheable: true,\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst multipleSearchForFacetValues = (base) => {\r\n    return (queries, requestOptions) => {\r\n        return Promise.all(queries.map(query => {\r\n            const { facetName, facetQuery, ...params } = query.params;\r\n            return initIndex(base)(query.indexName, {\r\n                methods: { searchForFacetValues },\r\n            }).searchForFacetValues(facetName, facetQuery, {\r\n                ...requestOptions,\r\n                ...params,\r\n            });\r\n        }));\r\n    };\r\n};\n\nconst removeUserID = (base) => {\r\n    return (userID, requestOptions) => {\r\n        const mappedRequestOptions = (0,_algolia_transporter__WEBPACK_IMPORTED_MODULE_2__.createMappedRequestOptions)(requestOptions);\r\n        // eslint-disable-next-line functional/immutable-data\r\n        mappedRequestOptions.queryParameters['X-Algolia-User-ID'] = userID;\r\n        return base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Delete,\r\n            path: '1/clusters/mapping',\r\n        }, mappedRequestOptions);\r\n    };\r\n};\n\nconst replaceDictionaryEntries = (base) => {\r\n    return (dictionary, entries, requestOptions) => {\r\n        const requests = entries.map(entry => ({\r\n            action: 'addEntry',\r\n            body: entry,\r\n        }));\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('/1/dictionaries/%s/batch', dictionary),\r\n            data: { clearExistingDictionaryEntries: true, requests },\r\n        }, requestOptions), (response, waitRequestOptions) => waitAppTask(base)(response.taskID, waitRequestOptions));\r\n    };\r\n};\n\nconst restoreApiKey = (base) => {\r\n    return (apiKey, requestOptions) => {\r\n        const wait = (_, waitRequestOptions) => {\r\n            return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createRetryablePromise)(retry => {\r\n                return getApiKey(base)(apiKey, waitRequestOptions).catch((apiError) => {\r\n                    if (apiError.status !== 404) {\r\n                        throw apiError;\r\n                    }\r\n                    return retry();\r\n                });\r\n            });\r\n        };\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/keys/%s/restore', apiKey),\r\n        }, requestOptions), wait);\r\n    };\r\n};\n\nconst saveDictionaryEntries = (base) => {\r\n    return (dictionary, entries, requestOptions) => {\r\n        const requests = entries.map(entry => ({\r\n            action: 'addEntry',\r\n            body: entry,\r\n        }));\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('/1/dictionaries/%s/batch', dictionary),\r\n            data: { clearExistingDictionaryEntries: false, requests },\r\n        }, requestOptions), (response, waitRequestOptions) => waitAppTask(base)(response.taskID, waitRequestOptions));\r\n    };\r\n};\n\nconst searchDictionaryEntries = (base) => {\r\n    return (dictionary, query, requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('/1/dictionaries/%s/search', dictionary),\r\n            data: {\r\n                query,\r\n            },\r\n            cacheable: true,\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst searchUserIDs = (base) => {\r\n    return (query, requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: '1/clusters/mapping/search',\r\n            data: {\r\n                query,\r\n            },\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst setDictionarySettings = (base) => {\r\n    return (settings, requestOptions) => {\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Put,\r\n            path: '/1/dictionaries/*/settings',\r\n            data: settings,\r\n        }, requestOptions), (response, waitRequestOptions) => waitAppTask(base)(response.taskID, waitRequestOptions));\r\n    };\r\n};\n\nconst updateApiKey = (base) => {\r\n    return (apiKey, requestOptions) => {\r\n        const updatedFields = Object.assign({}, requestOptions);\r\n        const { queryParameters, ...options } = requestOptions || {};\r\n        const data = queryParameters ? { queryParameters } : {};\r\n        const apiKeyFields = [\r\n            'acl',\r\n            'indexes',\r\n            'referers',\r\n            'restrictSources',\r\n            'queryParameters',\r\n            'description',\r\n            'maxQueriesPerIPPerHour',\r\n            'maxHitsPerQuery',\r\n        ];\r\n        // Check that all the fields retrieved through getApiKey are the same as the ones we wanted to update\r\n        const hasChanged = (getApiKeyResponse) => {\r\n            return Object.keys(updatedFields)\r\n                .filter((updatedField) => apiKeyFields.indexOf(updatedField) !== -1)\r\n                .every(updatedField => {\r\n                // If the field is an array, we need to check that they are the same length and that all the values are the same\r\n                if (Array.isArray(getApiKeyResponse[updatedField]) &&\r\n                    Array.isArray(updatedFields[updatedField])) {\r\n                    const getApiKeyResponseArray = getApiKeyResponse[updatedField];\r\n                    return (getApiKeyResponseArray.length === updatedFields[updatedField].length &&\r\n                        getApiKeyResponseArray.every((value, index) => value === updatedFields[updatedField][index]));\r\n                }\r\n                else {\r\n                    return getApiKeyResponse[updatedField] === updatedFields[updatedField];\r\n                }\r\n            });\r\n        };\r\n        const wait = (_, waitRequestOptions) => (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createRetryablePromise)(retry => {\r\n            return getApiKey(base)(apiKey, waitRequestOptions).then(getApiKeyResponse => {\r\n                return hasChanged(getApiKeyResponse) ? Promise.resolve() : retry();\r\n            });\r\n        });\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Put,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/keys/%s', apiKey),\r\n            data,\r\n        }, options), wait);\r\n    };\r\n};\n\nconst waitAppTask = (base) => {\r\n    return (taskID, requestOptions) => {\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createRetryablePromise)(retry => {\r\n            return getAppTask(base)(taskID, requestOptions).then(response => {\r\n                return response.status !== 'published' ? retry() : undefined;\r\n            });\r\n        });\r\n    };\r\n};\n\nconst batch = (base) => {\r\n    return (requests, requestOptions) => {\r\n        const wait = (response, waitRequestOptions) => {\r\n            return waitTask(base)(response.taskID, waitRequestOptions);\r\n        };\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/indexes/%s/batch', base.indexName),\r\n            data: {\r\n                requests,\r\n            },\r\n        }, requestOptions), wait);\r\n    };\r\n};\n\nconst browseObjects = (base) => {\r\n    return (requestOptions) => {\r\n        return createBrowsablePromise({\r\n            shouldStop: response => response.cursor === undefined,\r\n            ...requestOptions,\r\n            request: (data) => base.transporter.read({\r\n                method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n                path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/indexes/%s/browse', base.indexName),\r\n                data,\r\n            }, requestOptions),\r\n        });\r\n    };\r\n};\n\nconst browseRules = (base) => {\r\n    return (requestOptions) => {\r\n        const options = {\r\n            hitsPerPage: 1000,\r\n            ...requestOptions,\r\n        };\r\n        return createBrowsablePromise({\r\n            shouldStop: response => response.hits.length < options.hitsPerPage,\r\n            ...options,\r\n            request(data) {\r\n                return searchRules(base)('', { ...options, ...data }).then((response) => {\r\n                    return {\r\n                        ...response,\r\n                        hits: response.hits.map(rule => {\r\n                            // eslint-disable-next-line functional/immutable-data,no-param-reassign\r\n                            delete rule._highlightResult;\r\n                            return rule;\r\n                        }),\r\n                    };\r\n                });\r\n            },\r\n        });\r\n    };\r\n};\n\nconst browseSynonyms = (base) => {\r\n    return (requestOptions) => {\r\n        const options = {\r\n            hitsPerPage: 1000,\r\n            ...requestOptions,\r\n        };\r\n        return createBrowsablePromise({\r\n            shouldStop: response => response.hits.length < options.hitsPerPage,\r\n            ...options,\r\n            request(data) {\r\n                return searchSynonyms(base)('', { ...options, ...data }).then((response) => {\r\n                    return {\r\n                        ...response,\r\n                        hits: response.hits.map(synonym => {\r\n                            // eslint-disable-next-line functional/immutable-data,no-param-reassign\r\n                            delete synonym._highlightResult;\r\n                            return synonym;\r\n                        }),\r\n                    };\r\n                });\r\n            },\r\n        });\r\n    };\r\n};\n\nconst chunkedBatch = (base) => {\r\n    return (bodies, action, requestOptions) => {\r\n        const { batchSize, ...options } = requestOptions || {};\r\n        const response = {\r\n            taskIDs: [],\r\n            objectIDs: [],\r\n        };\r\n        const forEachBatch = (lastIndex = 0) => {\r\n            // eslint-disable-next-line functional/prefer-readonly-type\r\n            const bodiesChunk = [];\r\n            // eslint-disable-next-line functional/no-let\r\n            let index;\r\n            /* eslint-disable-next-line functional/no-loop-statement */\r\n            for (index = lastIndex; index < bodies.length; index++) {\r\n                // eslint-disable-next-line functional/immutable-data\r\n                bodiesChunk.push(bodies[index]);\r\n                if (bodiesChunk.length === (batchSize || 1000)) {\r\n                    break;\r\n                }\r\n            }\r\n            if (bodiesChunk.length === 0) {\r\n                return Promise.resolve(response);\r\n            }\r\n            return batch(base)(bodiesChunk.map(body => {\r\n                return {\r\n                    action,\r\n                    body,\r\n                };\r\n            }), options).then(res => {\r\n                response.objectIDs = response.objectIDs.concat(res.objectIDs); // eslint-disable-line functional/immutable-data\r\n                response.taskIDs.push(res.taskID); // eslint-disable-line functional/immutable-data\r\n                index++;\r\n                return forEachBatch(index);\r\n            });\r\n        };\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(forEachBatch(), (chunkedBatchResponse, waitRequestOptions) => {\r\n            return Promise.all(chunkedBatchResponse.taskIDs.map(taskID => {\r\n                return waitTask(base)(taskID, waitRequestOptions);\r\n            }));\r\n        });\r\n    };\r\n};\n\nconst clearObjects = (base) => {\r\n    return (requestOptions) => {\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/indexes/%s/clear', base.indexName),\r\n        }, requestOptions), (response, waitRequestOptions) => waitTask(base)(response.taskID, waitRequestOptions));\r\n    };\r\n};\n\nconst clearRules = (base) => {\r\n    return (requestOptions) => {\r\n        const { forwardToReplicas, ...options } = requestOptions || {};\r\n        const mappedRequestOptions = (0,_algolia_transporter__WEBPACK_IMPORTED_MODULE_2__.createMappedRequestOptions)(options);\r\n        if (forwardToReplicas) {\r\n            mappedRequestOptions.queryParameters.forwardToReplicas = 1; // eslint-disable-line functional/immutable-data\r\n        }\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/indexes/%s/rules/clear', base.indexName),\r\n        }, mappedRequestOptions), (response, waitRequestOptions) => waitTask(base)(response.taskID, waitRequestOptions));\r\n    };\r\n};\n\nconst clearSynonyms = (base) => {\r\n    return (requestOptions) => {\r\n        const { forwardToReplicas, ...options } = requestOptions || {};\r\n        const mappedRequestOptions = (0,_algolia_transporter__WEBPACK_IMPORTED_MODULE_2__.createMappedRequestOptions)(options);\r\n        if (forwardToReplicas) {\r\n            mappedRequestOptions.queryParameters.forwardToReplicas = 1; // eslint-disable-line functional/immutable-data\r\n        }\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/indexes/%s/synonyms/clear', base.indexName),\r\n        }, mappedRequestOptions), (response, waitRequestOptions) => waitTask(base)(response.taskID, waitRequestOptions));\r\n    };\r\n};\n\nconst deleteBy = (base) => {\r\n    return (filters, requestOptions) => {\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/indexes/%s/deleteByQuery', base.indexName),\r\n            data: filters,\r\n        }, requestOptions), (response, waitRequestOptions) => waitTask(base)(response.taskID, waitRequestOptions));\r\n    };\r\n};\n\nconst deleteIndex = (base) => {\r\n    return (requestOptions) => {\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Delete,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/indexes/%s', base.indexName),\r\n        }, requestOptions), (response, waitRequestOptions) => waitTask(base)(response.taskID, waitRequestOptions));\r\n    };\r\n};\n\nconst deleteObject = (base) => {\r\n    return (objectID, requestOptions) => {\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(deleteObjects(base)([objectID], requestOptions).then(response => {\r\n            return { taskID: response.taskIDs[0] };\r\n        }), (response, waitRequestOptions) => waitTask(base)(response.taskID, waitRequestOptions));\r\n    };\r\n};\n\nconst deleteObjects = (base) => {\r\n    return (objectIDs, requestOptions) => {\r\n        const objects = objectIDs.map(objectID => {\r\n            return { objectID };\r\n        });\r\n        return chunkedBatch(base)(objects, BatchActionEnum.DeleteObject, requestOptions);\r\n    };\r\n};\n\nconst deleteRule = (base) => {\r\n    return (objectID, requestOptions) => {\r\n        const { forwardToReplicas, ...options } = requestOptions || {};\r\n        const mappedRequestOptions = (0,_algolia_transporter__WEBPACK_IMPORTED_MODULE_2__.createMappedRequestOptions)(options);\r\n        if (forwardToReplicas) {\r\n            mappedRequestOptions.queryParameters.forwardToReplicas = 1; // eslint-disable-line functional/immutable-data\r\n        }\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Delete,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/indexes/%s/rules/%s', base.indexName, objectID),\r\n        }, mappedRequestOptions), (response, waitRequestOptions) => waitTask(base)(response.taskID, waitRequestOptions));\r\n    };\r\n};\n\nconst deleteSynonym = (base) => {\r\n    return (objectID, requestOptions) => {\r\n        const { forwardToReplicas, ...options } = requestOptions || {};\r\n        const mappedRequestOptions = (0,_algolia_transporter__WEBPACK_IMPORTED_MODULE_2__.createMappedRequestOptions)(options);\r\n        if (forwardToReplicas) {\r\n            mappedRequestOptions.queryParameters.forwardToReplicas = 1; // eslint-disable-line functional/immutable-data\r\n        }\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Delete,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/indexes/%s/synonyms/%s', base.indexName, objectID),\r\n        }, mappedRequestOptions), (response, waitRequestOptions) => waitTask(base)(response.taskID, waitRequestOptions));\r\n    };\r\n};\n\nconst exists = (base) => {\r\n    return (requestOptions) => {\r\n        return getSettings(base)(requestOptions)\r\n            .then(() => true)\r\n            .catch(error => {\r\n            if (error.status !== 404) {\r\n                throw error;\r\n            }\r\n            return false;\r\n        });\r\n    };\r\n};\n\nconst findAnswers = (base) => {\r\n    return (query, queryLanguages, requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/answers/%s/prediction', base.indexName),\r\n            data: {\r\n                query,\r\n                queryLanguages,\r\n            },\r\n            cacheable: true,\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst findObject = (base) => {\r\n    return (callback, requestOptions) => {\r\n        const { query, paginate, ...options } = requestOptions || {};\r\n        // eslint-disable-next-line functional/no-let\r\n        let page = 0;\r\n        const forEachPage = () => {\r\n            return search(base)(query || '', { ...options, page }).then(result => {\r\n                // eslint-disable-next-line functional/no-loop-statement\r\n                for (const [position, hit] of Object.entries(result.hits)) {\r\n                    // eslint-disable-next-line promise/no-callback-in-promise\r\n                    if (callback(hit)) {\r\n                        return {\r\n                            object: hit,\r\n                            position: parseInt(position, 10),\r\n                            page,\r\n                        };\r\n                    }\r\n                }\r\n                page++;\r\n                // paginate if option was set and has next page\r\n                if (paginate === false || page >= result.nbPages) {\r\n                    throw createObjectNotFoundError();\r\n                }\r\n                return forEachPage();\r\n            });\r\n        };\r\n        return forEachPage();\r\n    };\r\n};\n\nconst getObject = (base) => {\r\n    return (objectID, requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Get,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/indexes/%s/%s', base.indexName, objectID),\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst getObjectPosition = () => {\r\n    return (searchResponse, objectID) => {\r\n        // eslint-disable-next-line functional/no-loop-statement\r\n        for (const [position, hit] of Object.entries(searchResponse.hits)) {\r\n            if (hit.objectID === objectID) {\r\n                return parseInt(position, 10);\r\n            }\r\n        }\r\n        return -1;\r\n    };\r\n};\n\nconst getObjects = (base) => {\r\n    return (objectIDs, requestOptions) => {\r\n        const { attributesToRetrieve, ...options } = requestOptions || {};\r\n        const requests = objectIDs.map(objectID => {\r\n            return {\r\n                indexName: base.indexName,\r\n                objectID,\r\n                ...(attributesToRetrieve ? { attributesToRetrieve } : {}),\r\n            };\r\n        });\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: '1/indexes/*/objects',\r\n            data: {\r\n                requests,\r\n            },\r\n        }, options);\r\n    };\r\n};\n\nconst getRule = (base) => {\r\n    return (objectID, requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Get,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/indexes/%s/rules/%s', base.indexName, objectID),\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst getSettings = (base) => {\r\n    return (requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Get,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/indexes/%s/settings', base.indexName),\r\n            data: {\r\n                getVersion: 2,\r\n            },\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst getSynonym = (base) => {\r\n    return (objectID, requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Get,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)(`1/indexes/%s/synonyms/%s`, base.indexName, objectID),\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst getTask = (base) => {\r\n    return (taskID, requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Get,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/indexes/%s/task/%s', base.indexName, taskID.toString()),\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst partialUpdateObject = (base) => {\r\n    return (object, requestOptions) => {\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(partialUpdateObjects(base)([object], requestOptions).then(response => {\r\n            return {\r\n                objectID: response.objectIDs[0],\r\n                taskID: response.taskIDs[0],\r\n            };\r\n        }), (response, waitRequestOptions) => waitTask(base)(response.taskID, waitRequestOptions));\r\n    };\r\n};\n\nconst partialUpdateObjects = (base) => {\r\n    return (objects, requestOptions) => {\r\n        const { createIfNotExists, ...options } = requestOptions || {};\r\n        const action = createIfNotExists\r\n            ? BatchActionEnum.PartialUpdateObject\r\n            : BatchActionEnum.PartialUpdateObjectNoCreate;\r\n        return chunkedBatch(base)(objects, action, options);\r\n    };\r\n};\n\nconst replaceAllObjects = (base) => {\r\n    return (objects, requestOptions) => {\r\n        const { safe, autoGenerateObjectIDIfNotExist, batchSize, ...options } = requestOptions || {};\r\n        const operation = (from, to, type, operationRequestOptions) => {\r\n            return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n                method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n                path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/indexes/%s/operation', from),\r\n                data: {\r\n                    operation: type,\r\n                    destination: to,\r\n                },\r\n            }, operationRequestOptions), (response, waitRequestOptions) => waitTask(base)(response.taskID, waitRequestOptions));\r\n        };\r\n        const randomSuffix = Math.random()\r\n            .toString(36)\r\n            .substring(7);\r\n        const temporaryIndexName = `${base.indexName}_tmp_${randomSuffix}`;\r\n        const saveObjectsInTemporary = saveObjects({\r\n            appId: base.appId,\r\n            transporter: base.transporter,\r\n            indexName: temporaryIndexName,\r\n        });\r\n        // @ts-ignore\r\n        // eslint-disable-next-line prefer-const, functional/no-let, functional/prefer-readonly-type\r\n        let responses = [];\r\n        const copyWaitablePromise = operation(base.indexName, temporaryIndexName, 'copy', {\r\n            ...options,\r\n            scope: ['settings', 'synonyms', 'rules'],\r\n        });\r\n        // eslint-disable-next-line functional/immutable-data\r\n        responses.push(copyWaitablePromise);\r\n        const result = (safe\r\n            ? copyWaitablePromise.wait(options)\r\n            : copyWaitablePromise)\r\n            .then(() => {\r\n            const saveObjectsWaitablePromise = saveObjectsInTemporary(objects, {\r\n                ...options,\r\n                autoGenerateObjectIDIfNotExist,\r\n                batchSize,\r\n            });\r\n            // eslint-disable-next-line functional/immutable-data\r\n            responses.push(saveObjectsWaitablePromise);\r\n            return safe ? saveObjectsWaitablePromise.wait(options) : saveObjectsWaitablePromise;\r\n        })\r\n            .then(() => {\r\n            const moveWaitablePromise = operation(temporaryIndexName, base.indexName, 'move', options);\r\n            // eslint-disable-next-line functional/immutable-data\r\n            responses.push(moveWaitablePromise);\r\n            return safe ? moveWaitablePromise.wait(options) : moveWaitablePromise;\r\n        })\r\n            .then(() => Promise.all(responses))\r\n            .then(([copyResponse, saveObjectsResponse, moveResponse]) => {\r\n            return {\r\n                objectIDs: saveObjectsResponse.objectIDs,\r\n                taskIDs: [copyResponse.taskID, ...saveObjectsResponse.taskIDs, moveResponse.taskID],\r\n            };\r\n        });\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(result, (_, waitRequestOptions) => {\r\n            return Promise.all(responses.map(response => response.wait(waitRequestOptions)));\r\n        });\r\n    };\r\n};\n\nconst replaceAllRules = (base) => {\r\n    return (rules, requestOptions) => {\r\n        return saveRules(base)(rules, {\r\n            ...requestOptions,\r\n            clearExistingRules: true,\r\n        });\r\n    };\r\n};\n\nconst replaceAllSynonyms = (base) => {\r\n    return (synonyms, requestOptions) => {\r\n        return saveSynonyms(base)(synonyms, {\r\n            ...requestOptions,\r\n            clearExistingSynonyms: true,\r\n        });\r\n    };\r\n};\n\nconst saveObject = (base) => {\r\n    return (object, requestOptions) => {\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(saveObjects(base)([object], requestOptions).then(response => {\r\n            return {\r\n                objectID: response.objectIDs[0],\r\n                taskID: response.taskIDs[0],\r\n            };\r\n        }), (response, waitRequestOptions) => waitTask(base)(response.taskID, waitRequestOptions));\r\n    };\r\n};\n\nconst saveObjects = (base) => {\r\n    return (objects, requestOptions) => {\r\n        const { autoGenerateObjectIDIfNotExist, ...options } = requestOptions || {};\r\n        const action = autoGenerateObjectIDIfNotExist\r\n            ? BatchActionEnum.AddObject\r\n            : BatchActionEnum.UpdateObject;\r\n        if (action === BatchActionEnum.UpdateObject) {\r\n            // eslint-disable-next-line functional/no-loop-statement\r\n            for (const object of objects) {\r\n                if (object.objectID === undefined) {\r\n                    return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(Promise.reject(createMissingObjectIDError()));\r\n                }\r\n            }\r\n        }\r\n        return chunkedBatch(base)(objects, action, options);\r\n    };\r\n};\n\nconst saveRule = (base) => {\r\n    return (rule, requestOptions) => {\r\n        return saveRules(base)([rule], requestOptions);\r\n    };\r\n};\n\nconst saveRules = (base) => {\r\n    return (rules, requestOptions) => {\r\n        const { forwardToReplicas, clearExistingRules, ...options } = requestOptions || {};\r\n        const mappedRequestOptions = (0,_algolia_transporter__WEBPACK_IMPORTED_MODULE_2__.createMappedRequestOptions)(options);\r\n        if (forwardToReplicas) {\r\n            mappedRequestOptions.queryParameters.forwardToReplicas = 1; // eslint-disable-line functional/immutable-data\r\n        }\r\n        if (clearExistingRules) {\r\n            mappedRequestOptions.queryParameters.clearExistingRules = 1; // eslint-disable-line functional/immutable-data\r\n        }\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/indexes/%s/rules/batch', base.indexName),\r\n            data: rules,\r\n        }, mappedRequestOptions), (response, waitRequestOptions) => waitTask(base)(response.taskID, waitRequestOptions));\r\n    };\r\n};\n\nconst saveSynonym = (base) => {\r\n    return (synonym, requestOptions) => {\r\n        return saveSynonyms(base)([synonym], requestOptions);\r\n    };\r\n};\n\nconst saveSynonyms = (base) => {\r\n    return (synonyms, requestOptions) => {\r\n        const { forwardToReplicas, clearExistingSynonyms, replaceExistingSynonyms, ...options } = requestOptions || {};\r\n        const mappedRequestOptions = (0,_algolia_transporter__WEBPACK_IMPORTED_MODULE_2__.createMappedRequestOptions)(options);\r\n        if (forwardToReplicas) {\r\n            mappedRequestOptions.queryParameters.forwardToReplicas = 1; // eslint-disable-line functional/immutable-data\r\n        }\r\n        if (replaceExistingSynonyms || clearExistingSynonyms) {\r\n            mappedRequestOptions.queryParameters.replaceExistingSynonyms = 1; // eslint-disable-line functional/immutable-data\r\n        }\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/indexes/%s/synonyms/batch', base.indexName),\r\n            data: synonyms,\r\n        }, mappedRequestOptions), (response, waitRequestOptions) => waitTask(base)(response.taskID, waitRequestOptions));\r\n    };\r\n};\n\nconst search = (base) => {\r\n    return (query, requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/indexes/%s/query', base.indexName),\r\n            data: {\r\n                query,\r\n            },\r\n            cacheable: true,\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst searchForFacetValues = (base) => {\r\n    return (facetName, facetQuery, requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/indexes/%s/facets/%s/query', base.indexName, facetName),\r\n            data: {\r\n                facetQuery,\r\n            },\r\n            cacheable: true,\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst searchRules = (base) => {\r\n    return (query, requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/indexes/%s/rules/search', base.indexName),\r\n            data: {\r\n                query,\r\n            },\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst searchSynonyms = (base) => {\r\n    return (query, requestOptions) => {\r\n        return base.transporter.read({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Post,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/indexes/%s/synonyms/search', base.indexName),\r\n            data: {\r\n                query,\r\n            },\r\n        }, requestOptions);\r\n    };\r\n};\n\nconst setSettings = (base) => {\r\n    return (settings, requestOptions) => {\r\n        const { forwardToReplicas, ...options } = requestOptions || {};\r\n        const mappedRequestOptions = (0,_algolia_transporter__WEBPACK_IMPORTED_MODULE_2__.createMappedRequestOptions)(options);\r\n        if (forwardToReplicas) {\r\n            mappedRequestOptions.queryParameters.forwardToReplicas = 1; // eslint-disable-line functional/immutable-data\r\n        }\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createWaitablePromise)(base.transporter.write({\r\n            method: _algolia_requester_common__WEBPACK_IMPORTED_MODULE_3__.MethodEnum.Put,\r\n            path: (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.encode)('1/indexes/%s/settings', base.indexName),\r\n            data: settings,\r\n        }, mappedRequestOptions), (response, waitRequestOptions) => waitTask(base)(response.taskID, waitRequestOptions));\r\n    };\r\n};\n\nconst waitTask = (base) => {\r\n    return (taskID, requestOptions) => {\r\n        return (0,_algolia_client_common__WEBPACK_IMPORTED_MODULE_1__.createRetryablePromise)(retry => {\r\n            return getTask(base)(taskID, requestOptions).then(response => {\r\n                return response.status !== 'published' ? retry() : undefined;\r\n            });\r\n        });\r\n    };\r\n};\n\nconst ApiKeyACLEnum = {\r\n    AddObject: 'addObject',\r\n    Analytics: 'analytics',\r\n    Browser: 'browse',\r\n    DeleteIndex: 'deleteIndex',\r\n    DeleteObject: 'deleteObject',\r\n    EditSettings: 'editSettings',\r\n    Inference: 'inference',\r\n    ListIndexes: 'listIndexes',\r\n    Logs: 'logs',\r\n    Personalization: 'personalization',\r\n    Recommendation: 'recommendation',\r\n    Search: 'search',\r\n    SeeUnretrievableAttributes: 'seeUnretrievableAttributes',\r\n    Settings: 'settings',\r\n    Usage: 'usage',\r\n};\n\nconst BatchActionEnum = {\r\n    AddObject: 'addObject',\r\n    UpdateObject: 'updateObject',\r\n    PartialUpdateObject: 'partialUpdateObject',\r\n    PartialUpdateObjectNoCreate: 'partialUpdateObjectNoCreate',\r\n    DeleteObject: 'deleteObject',\r\n    DeleteIndex: 'delete',\r\n    ClearIndex: 'clear',\r\n};\n\nconst ScopeEnum = {\r\n    Settings: 'settings',\r\n    Synonyms: 'synonyms',\r\n    Rules: 'rules',\r\n};\n\nconst StrategyEnum = {\r\n    None: 'none',\r\n    StopIfEnoughMatches: 'stopIfEnoughMatches',\r\n};\n\nconst SynonymEnum = {\r\n    Synonym: 'synonym',\r\n    OneWaySynonym: 'oneWaySynonym',\r\n    AltCorrection1: 'altCorrection1',\r\n    AltCorrection2: 'altCorrection2',\r\n    Placeholder: 'placeholder',\r\n};\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQGFsZ29saWErY2xpZW50LXNlYXJjaEA0LjI0LjAvbm9kZV9tb2R1bGVzL0BhbGdvbGlhL2NsaWVudC1zZWFyY2gvZGlzdC9jbGllbnQtc2VhcmNoLmVzbS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUEwSTtBQUNqQjtBQUNsRTtBQUNuQjs7QUFFcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0Esb0JBQW9CO0FBQ3BCOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUIsa0VBQVUscURBQXFELDREQUFRO0FBQ3hGLHdCQUF3Qix1RUFBaUI7QUFDekM7QUFDQSxjQUFjLFFBQVEsTUFBTSwyQkFBMkIsMERBQVEsT0FBTztBQUN0RSxjQUFjLFFBQVEsTUFBTSx1QkFBdUIsMERBQVEsUUFBUTtBQUNuRSxpQkFBaUIsK0RBQU87QUFDeEIsY0FBYyxRQUFRLE1BQU0sb0JBQW9CO0FBQ2hELGNBQWMsUUFBUSxNQUFNLG9CQUFvQjtBQUNoRCxjQUFjLFFBQVEsTUFBTSxvQkFBb0I7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIscURBQXFEO0FBQ3RFO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0Msa0JBQWtCO0FBQzFELFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsV0FBVyxrRUFBVTtBQUNyQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyx1Q0FBdUM7QUFDeEU7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxnQkFBZ0IsOEJBQThCO0FBQzlDO0FBQ0E7QUFDQSxrREFBa0Qsa0JBQWtCLElBQUk7QUFDeEU7QUFDQTtBQUNBLG1CQUFtQiw4RUFBc0I7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2I7QUFDQSxlQUFlLDZFQUFxQjtBQUNwQyxvQkFBb0IsaUVBQVU7QUFDOUI7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxxQ0FBcUMsZ0ZBQTBCO0FBQy9EO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixpRUFBVTtBQUM5QjtBQUNBLG9CQUFvQixzQkFBc0I7QUFDMUMsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGlFQUFVO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLDZFQUFxQjtBQUNwQyxvQkFBb0IsaUVBQVU7QUFDOUIsa0JBQWtCLDhEQUFNO0FBQ3hCO0FBQ0E7QUFDQSw0QkFBNEIsOEJBQThCO0FBQzFELGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixVQUFVO0FBQ3JDLGFBQWE7QUFDYjtBQUNBLGVBQWUsNkVBQXFCO0FBQ3BDLG9CQUFvQixpRUFBVTtBQUM5QixrQkFBa0IsOERBQU07QUFDeEI7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQSwrQkFBK0IsaUVBQVU7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsOEVBQXNCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2I7QUFDQSxlQUFlLDZFQUFxQjtBQUNwQyxvQkFBb0IsaUVBQVU7QUFDOUIsa0JBQWtCLDhEQUFNO0FBQ3hCLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLFVBQVU7QUFDOUIsU0FBUztBQUNULGVBQWUsNkVBQXFCO0FBQ3BDLG9CQUFvQixpRUFBVTtBQUM5QixrQkFBa0IsOERBQU07QUFDeEIsb0JBQW9CLGlEQUFpRDtBQUNyRSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZ0NBQWdDLDhFQUF3QjtBQUN4RCwyQkFBMkIsa0RBQVU7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsaUVBQVU7QUFDOUIsa0JBQWtCLDhEQUFNO0FBQ3hCLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixpRUFBVTtBQUM5QixrQkFBa0IsOERBQU07QUFDeEIsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGlFQUFVO0FBQzlCO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGlFQUFVO0FBQzlCO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsaUVBQVU7QUFDOUI7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsaUVBQVU7QUFDOUIsa0JBQWtCLDhEQUFNO0FBQ3hCLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxnQkFBZ0IsK0JBQStCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsaUVBQVU7QUFDOUI7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBLG1DQUFtQztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxrRUFBVTtBQUN6QjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixpRUFBVTtBQUM5QjtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixpRUFBVTtBQUM5QjtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixpRUFBVTtBQUM5QjtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixpRUFBVTtBQUM5QjtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLFVBQVU7QUFDckMsYUFBYTtBQUNiO0FBQ0EsZUFBZSw2RUFBcUI7QUFDcEMsb0JBQW9CLGlFQUFVO0FBQzlCLGtCQUFrQiw4REFBTTtBQUN4QjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixVQUFVO0FBQ3pDLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2I7QUFDQSxlQUFlLDZFQUFxQjtBQUNwQyxvQkFBb0IsaUVBQVU7QUFDOUI7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixpRUFBVTtBQUM5QjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qiw4RUFBd0IsbUJBQW1CO0FBQ25FO0FBQ0EsU0FBUztBQUNUO0FBQ0Esb0JBQW9CLGlFQUFVO0FBQzlCO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixtQ0FBbUM7QUFDdkQ7QUFDQSwyQkFBMkIsc0JBQXNCO0FBQ2pELGFBQWE7QUFDYjtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxxQ0FBcUMsZ0ZBQTBCO0FBQy9EO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixpRUFBVTtBQUM5QjtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsZUFBZSw2RUFBcUI7QUFDcEMsb0JBQW9CLGlFQUFVO0FBQzlCLGtCQUFrQiw4REFBTTtBQUN4QixvQkFBb0IsZ0RBQWdEO0FBQ3BFLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQiw4RUFBc0I7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2I7QUFDQSxlQUFlLDZFQUFxQjtBQUNwQyxvQkFBb0IsaUVBQVU7QUFDOUIsa0JBQWtCLDhEQUFNO0FBQ3hCLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsZUFBZSw2RUFBcUI7QUFDcEMsb0JBQW9CLGlFQUFVO0FBQzlCLGtCQUFrQiw4REFBTTtBQUN4QixvQkFBb0IsaURBQWlEO0FBQ3JFLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixpRUFBVTtBQUM5QixrQkFBa0IsOERBQU07QUFDeEI7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixpRUFBVTtBQUM5QjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsNkVBQXFCO0FBQ3BDLG9CQUFvQixpRUFBVTtBQUM5QjtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDhDQUE4QztBQUM5QyxnQkFBZ0IsOEJBQThCO0FBQzlDLHlDQUF5QyxrQkFBa0I7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxnREFBZ0QsOEVBQXNCO0FBQ3RFO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNULGVBQWUsNkVBQXFCO0FBQ3BDLG9CQUFvQixpRUFBVTtBQUM5QixrQkFBa0IsOERBQU07QUFDeEI7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSw4RUFBc0I7QUFDckM7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSw2RUFBcUI7QUFDcEMsb0JBQW9CLGlFQUFVO0FBQzlCLGtCQUFrQiw4REFBTTtBQUN4QjtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixpRUFBVTtBQUNsQyxzQkFBc0IsOERBQU07QUFDNUI7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0MscUJBQXFCO0FBQ3BFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0QscUJBQXFCO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGdCQUFnQix3QkFBd0I7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MsdUJBQXVCO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsK0VBQStFO0FBQy9FLG1EQUFtRDtBQUNuRDtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsZUFBZSw2RUFBcUI7QUFDcEM7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSw2RUFBcUI7QUFDcEMsb0JBQW9CLGlFQUFVO0FBQzlCLGtCQUFrQiw4REFBTTtBQUN4QixTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZ0JBQWdCLGdDQUFnQztBQUNoRCxxQ0FBcUMsZ0ZBQTBCO0FBQy9EO0FBQ0Esd0VBQXdFO0FBQ3hFO0FBQ0EsZUFBZSw2RUFBcUI7QUFDcEMsb0JBQW9CLGlFQUFVO0FBQzlCLGtCQUFrQiw4REFBTTtBQUN4QixTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZ0JBQWdCLGdDQUFnQztBQUNoRCxxQ0FBcUMsZ0ZBQTBCO0FBQy9EO0FBQ0Esd0VBQXdFO0FBQ3hFO0FBQ0EsZUFBZSw2RUFBcUI7QUFDcEMsb0JBQW9CLGlFQUFVO0FBQzlCLGtCQUFrQiw4REFBTTtBQUN4QixTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSw2RUFBcUI7QUFDcEMsb0JBQW9CLGlFQUFVO0FBQzlCLGtCQUFrQiw4REFBTTtBQUN4QjtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLDZFQUFxQjtBQUNwQyxvQkFBb0IsaUVBQVU7QUFDOUIsa0JBQWtCLDhEQUFNO0FBQ3hCLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLDZFQUFxQjtBQUNwQyxxQkFBcUI7QUFDckIsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGdCQUFnQixnQ0FBZ0M7QUFDaEQscUNBQXFDLGdGQUEwQjtBQUMvRDtBQUNBLHdFQUF3RTtBQUN4RTtBQUNBLGVBQWUsNkVBQXFCO0FBQ3BDLG9CQUFvQixpRUFBVTtBQUM5QixrQkFBa0IsOERBQU07QUFDeEIsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGdCQUFnQixnQ0FBZ0M7QUFDaEQscUNBQXFDLGdGQUEwQjtBQUMvRDtBQUNBLHdFQUF3RTtBQUN4RTtBQUNBLGVBQWUsNkVBQXFCO0FBQ3BDLG9CQUFvQixpRUFBVTtBQUM5QixrQkFBa0IsOERBQU07QUFDeEIsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGlFQUFVO0FBQzlCLGtCQUFrQiw4REFBTTtBQUN4QjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZ0JBQWdCLDhCQUE4QjtBQUM5QztBQUNBO0FBQ0E7QUFDQSwrQ0FBK0Msa0JBQWtCO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGlFQUFVO0FBQzlCLGtCQUFrQiw4REFBTTtBQUN4QixTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxnQkFBZ0IsbUNBQW1DO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLHVCQUF1QixJQUFJO0FBQ3hFO0FBQ0EsU0FBUztBQUNUO0FBQ0Esb0JBQW9CLGlFQUFVO0FBQzlCO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsaUVBQVU7QUFDOUIsa0JBQWtCLDhEQUFNO0FBQ3hCLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixpRUFBVTtBQUM5QixrQkFBa0IsOERBQU07QUFDeEI7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsaUVBQVU7QUFDOUIsa0JBQWtCLDhEQUFNO0FBQ3hCLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixpRUFBVTtBQUM5QixrQkFBa0IsOERBQU07QUFDeEIsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsNkVBQXFCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGdCQUFnQixnQ0FBZ0M7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxnQkFBZ0IsOERBQThEO0FBQzlFO0FBQ0EsbUJBQW1CLDZFQUFxQjtBQUN4Qyx3QkFBd0IsaUVBQVU7QUFDbEMsc0JBQXNCLDhEQUFNO0FBQzVCO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsZUFBZSxPQUFPLGFBQWE7QUFDekU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxlQUFlLDZFQUFxQjtBQUNwQztBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsNkVBQXFCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGdCQUFnQiw2Q0FBNkM7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsNkVBQXFCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxnQkFBZ0Isb0RBQW9EO0FBQ3BFLHFDQUFxQyxnRkFBMEI7QUFDL0Q7QUFDQSx3RUFBd0U7QUFDeEU7QUFDQTtBQUNBLHlFQUF5RTtBQUN6RTtBQUNBLGVBQWUsNkVBQXFCO0FBQ3BDLG9CQUFvQixpRUFBVTtBQUM5QixrQkFBa0IsOERBQU07QUFDeEI7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxnQkFBZ0IsZ0ZBQWdGO0FBQ2hHLHFDQUFxQyxnRkFBMEI7QUFDL0Q7QUFDQSx3RUFBd0U7QUFDeEU7QUFDQTtBQUNBLDhFQUE4RTtBQUM5RTtBQUNBLGVBQWUsNkVBQXFCO0FBQ3BDLG9CQUFvQixpRUFBVTtBQUM5QixrQkFBa0IsOERBQU07QUFDeEI7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsaUVBQVU7QUFDOUIsa0JBQWtCLDhEQUFNO0FBQ3hCO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsaUVBQVU7QUFDOUIsa0JBQWtCLDhEQUFNO0FBQ3hCO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsaUVBQVU7QUFDOUIsa0JBQWtCLDhEQUFNO0FBQ3hCO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGlFQUFVO0FBQzlCLGtCQUFrQiw4REFBTTtBQUN4QjtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxnQkFBZ0IsZ0NBQWdDO0FBQ2hELHFDQUFxQyxnRkFBMEI7QUFDL0Q7QUFDQSx3RUFBd0U7QUFDeEU7QUFDQSxlQUFlLDZFQUFxQjtBQUNwQyxvQkFBb0IsaUVBQVU7QUFDOUIsa0JBQWtCLDhEQUFNO0FBQ3hCO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsOEVBQXNCO0FBQ3JDO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFMjRDIiwic291cmNlcyI6WyIvdmFyL3d3dy9kZXBsb3ktYWRhcC9zcmMvbm9kZV9tb2R1bGVzLy5wbnBtL0BhbGdvbGlhK2NsaWVudC1zZWFyY2hANC4yNC4wL25vZGVfbW9kdWxlcy9AYWxnb2xpYS9jbGllbnQtc2VhcmNoL2Rpc3QvY2xpZW50LXNlYXJjaC5lc20uanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlQXV0aCwgQXV0aE1vZGUsIHNodWZmbGUsIGFkZE1ldGhvZHMsIGNyZWF0ZVdhaXRhYmxlUHJvbWlzZSwgY3JlYXRlUmV0cnlhYmxlUHJvbWlzZSwgZW5jb2RlIH0gZnJvbSAnQGFsZ29saWEvY2xpZW50LWNvbW1vbic7XG5pbXBvcnQgeyBjcmVhdGVUcmFuc3BvcnRlciwgQ2FsbEVudW0sIGNyZWF0ZU1hcHBlZFJlcXVlc3RPcHRpb25zLCBzZXJpYWxpemVRdWVyeVBhcmFtZXRlcnMgfSBmcm9tICdAYWxnb2xpYS90cmFuc3BvcnRlcic7XG5pbXBvcnQgeyBNZXRob2RFbnVtIH0gZnJvbSAnQGFsZ29saWEvcmVxdWVzdGVyLWNvbW1vbic7XG5pbXBvcnQgeyBjcmVhdGVIbWFjIH0gZnJvbSAnY3J5cHRvJztcblxuZnVuY3Rpb24gY3JlYXRlQnJvd3NhYmxlUHJvbWlzZShvcHRpb25zKSB7XHJcbiAgICBjb25zdCBicm93c2UgPSAoZGF0YSkgPT4ge1xyXG4gICAgICAgIHJldHVybiBvcHRpb25zLnJlcXVlc3QoZGF0YSkudGhlbihyZXNwb25zZSA9PiB7XHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBGaXJzdCB3ZSBzZW5kIHRvIHRoZSBkZXZlbG9wZXIgdGhlXHJcbiAgICAgICAgICAgICAqIGJhdGNoIHJldHJpZXZlZCBmcm9tIHRoZSBBUEkuXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5iYXRjaCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBvcHRpb25zLmJhdGNoKHJlc3BvbnNlLmhpdHMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBUaGVuLCB3ZSBhc2sgdG8gdGhlIGJyb3dzZSBjb25jcmV0ZSBpbXBsZW1lbnRhdGlvblxyXG4gICAgICAgICAgICAgKiBpZiB3ZSBzaG91bGQgc3RvcCBicm93c2luZy4gQXMgZXhhbXBsZSwgdGhlIGBicm93c2VPYmplY3RzYFxyXG4gICAgICAgICAgICAgKiBtZXRob2Qgd2lsbCBzdG9wIGlmIHRoZSBjdXJzb3IgaXMgbm90IHByZXNlbnQgb24gdGhlIHJlc3BvbnNlLlxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuc2hvdWxkU3RvcChyZXNwb25zZSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEZpbmFsbHksIGlmIHRoZSByZXNwb25zZSBjb250YWlucyBhIGN1cnNvciwgd2UgYnJvd3NlIHRvIHRoZSBuZXh0XHJcbiAgICAgICAgICAgICAqIGJhdGNoIHVzaW5nIHRoYXQgc2FtZSBjdXJzb3IuIE90aGVyd2lzZSwgd2UganVzdCB1c2UgdGhlIHRyYWRpdGlvbmFsXHJcbiAgICAgICAgICAgICAqIGJyb3dzaW5nIHVzaW5nIHRoZSBwYWdlIGVsZW1lbnQuXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBpZiAocmVzcG9uc2UuY3Vyc29yKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYnJvd3NlKHtcclxuICAgICAgICAgICAgICAgICAgICBjdXJzb3I6IHJlc3BvbnNlLmN1cnNvcixcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBicm93c2Uoe1xyXG4gICAgICAgICAgICAgICAgcGFnZTogKGRhdGEucGFnZSB8fCAwKSArIDEsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBicm93c2Uoe30pO1xyXG59XG5cbmNvbnN0IGNyZWF0ZVNlYXJjaENsaWVudCA9IG9wdGlvbnMgPT4ge1xyXG4gICAgY29uc3QgYXBwSWQgPSBvcHRpb25zLmFwcElkO1xyXG4gICAgY29uc3QgYXV0aCA9IGNyZWF0ZUF1dGgob3B0aW9ucy5hdXRoTW9kZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5hdXRoTW9kZSA6IEF1dGhNb2RlLldpdGhpbkhlYWRlcnMsIGFwcElkLCBvcHRpb25zLmFwaUtleSk7XHJcbiAgICBjb25zdCB0cmFuc3BvcnRlciA9IGNyZWF0ZVRyYW5zcG9ydGVyKHtcclxuICAgICAgICBob3N0czogW1xyXG4gICAgICAgICAgICB7IHVybDogYCR7YXBwSWR9LWRzbi5hbGdvbGlhLm5ldGAsIGFjY2VwdDogQ2FsbEVudW0uUmVhZCB9LFxyXG4gICAgICAgICAgICB7IHVybDogYCR7YXBwSWR9LmFsZ29saWEubmV0YCwgYWNjZXB0OiBDYWxsRW51bS5Xcml0ZSB9LFxyXG4gICAgICAgIF0uY29uY2F0KHNodWZmbGUoW1xyXG4gICAgICAgICAgICB7IHVybDogYCR7YXBwSWR9LTEuYWxnb2xpYW5ldC5jb21gIH0sXHJcbiAgICAgICAgICAgIHsgdXJsOiBgJHthcHBJZH0tMi5hbGdvbGlhbmV0LmNvbWAgfSxcclxuICAgICAgICAgICAgeyB1cmw6IGAke2FwcElkfS0zLmFsZ29saWFuZXQuY29tYCB9LFxyXG4gICAgICAgIF0pKSxcclxuICAgICAgICAuLi5vcHRpb25zLFxyXG4gICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgLi4uYXV0aC5oZWFkZXJzKCksXHJcbiAgICAgICAgICAgIC4uLnsgJ2NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnIH0sXHJcbiAgICAgICAgICAgIC4uLm9wdGlvbnMuaGVhZGVycyxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHF1ZXJ5UGFyYW1ldGVyczoge1xyXG4gICAgICAgICAgICAuLi5hdXRoLnF1ZXJ5UGFyYW1ldGVycygpLFxyXG4gICAgICAgICAgICAuLi5vcHRpb25zLnF1ZXJ5UGFyYW1ldGVycyxcclxuICAgICAgICB9LFxyXG4gICAgfSk7XHJcbiAgICBjb25zdCBiYXNlID0ge1xyXG4gICAgICAgIHRyYW5zcG9ydGVyLFxyXG4gICAgICAgIGFwcElkLFxyXG4gICAgICAgIGFkZEFsZ29saWFBZ2VudChzZWdtZW50LCB2ZXJzaW9uKSB7XHJcbiAgICAgICAgICAgIHRyYW5zcG9ydGVyLnVzZXJBZ2VudC5hZGQoeyBzZWdtZW50LCB2ZXJzaW9uIH0pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY2xlYXJDYWNoZSgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKFtcclxuICAgICAgICAgICAgICAgIHRyYW5zcG9ydGVyLnJlcXVlc3RzQ2FjaGUuY2xlYXIoKSxcclxuICAgICAgICAgICAgICAgIHRyYW5zcG9ydGVyLnJlc3BvbnNlc0NhY2hlLmNsZWFyKCksXHJcbiAgICAgICAgICAgIF0pLnRoZW4oKCkgPT4gdW5kZWZpbmVkKTtcclxuICAgICAgICB9LFxyXG4gICAgfTtcclxuICAgIHJldHVybiBhZGRNZXRob2RzKGJhc2UsIG9wdGlvbnMubWV0aG9kcyk7XHJcbn07XG5cbmZ1bmN0aW9uIGNyZWF0ZU1pc3NpbmdPYmplY3RJREVycm9yKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBuYW1lOiAnTWlzc2luZ09iamVjdElERXJyb3InLFxyXG4gICAgICAgIG1lc3NhZ2U6ICdBbGwgb2JqZWN0cyBtdXN0IGhhdmUgYW4gdW5pcXVlIG9iamVjdElEICcgK1xyXG4gICAgICAgICAgICAnKGxpa2UgYSBwcmltYXJ5IGtleSkgdG8gYmUgdmFsaWQuICcgK1xyXG4gICAgICAgICAgICAnQWxnb2xpYSBpcyBhbHNvIGFibGUgdG8gZ2VuZXJhdGUgb2JqZWN0SURzICcgK1xyXG4gICAgICAgICAgICBcImF1dG9tYXRpY2FsbHkgYnV0ICppdCdzIG5vdCByZWNvbW1lbmRlZCouIFwiICtcclxuICAgICAgICAgICAgXCJUbyBkbyBpdCwgdXNlIHRoZSBgeydhdXRvR2VuZXJhdGVPYmplY3RJRElmTm90RXhpc3QnOiB0cnVlfWAgb3B0aW9uLlwiLFxyXG4gICAgfTtcclxufVxuXG5mdW5jdGlvbiBjcmVhdGVPYmplY3ROb3RGb3VuZEVycm9yKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBuYW1lOiAnT2JqZWN0Tm90Rm91bmRFcnJvcicsXHJcbiAgICAgICAgbWVzc2FnZTogJ09iamVjdCBub3QgZm91bmQuJyxcclxuICAgIH07XHJcbn1cblxuZnVuY3Rpb24gY3JlYXRlVmFsaWRVbnRpbE5vdEZvdW5kRXJyb3IoKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIG5hbWU6ICdWYWxpZFVudGlsTm90Rm91bmRFcnJvcicsXHJcbiAgICAgICAgbWVzc2FnZTogJ1ZhbGlkVW50aWwgbm90IGZvdW5kIGluIGdpdmVuIHNlY3VyZWQgYXBpIGtleS4nLFxyXG4gICAgfTtcclxufVxuXG5jb25zdCBhZGRBcGlLZXkgPSAoYmFzZSkgPT4ge1xyXG4gICAgcmV0dXJuIChhY2wsIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgY29uc3QgeyBxdWVyeVBhcmFtZXRlcnMsIC4uLm9wdGlvbnMgfSA9IHJlcXVlc3RPcHRpb25zIHx8IHt9O1xyXG4gICAgICAgIGNvbnN0IGRhdGEgPSB7XHJcbiAgICAgICAgICAgIGFjbCxcclxuICAgICAgICAgICAgLi4uKHF1ZXJ5UGFyYW1ldGVycyAhPT0gdW5kZWZpbmVkID8geyBxdWVyeVBhcmFtZXRlcnMgfSA6IHt9KSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbnN0IHdhaXQgPSAocmVzcG9uc2UsIHdhaXRSZXF1ZXN0T3B0aW9ucykgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gY3JlYXRlUmV0cnlhYmxlUHJvbWlzZShyZXRyeSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0QXBpS2V5KGJhc2UpKHJlc3BvbnNlLmtleSwgd2FpdFJlcXVlc3RPcHRpb25zKS5jYXRjaCgoYXBpRXJyb3IpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYXBpRXJyb3Iuc3RhdHVzICE9PSA0MDQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgYXBpRXJyb3I7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXRyeSgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIGNyZWF0ZVdhaXRhYmxlUHJvbWlzZShiYXNlLnRyYW5zcG9ydGVyLndyaXRlKHtcclxuICAgICAgICAgICAgbWV0aG9kOiBNZXRob2RFbnVtLlBvc3QsXHJcbiAgICAgICAgICAgIHBhdGg6ICcxL2tleXMnLFxyXG4gICAgICAgICAgICBkYXRhLFxyXG4gICAgICAgIH0sIG9wdGlvbnMpLCB3YWl0KTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IGFzc2lnblVzZXJJRCA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKHVzZXJJRCwgY2x1c3Rlck5hbWUsIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgY29uc3QgbWFwcGVkUmVxdWVzdE9wdGlvbnMgPSBjcmVhdGVNYXBwZWRSZXF1ZXN0T3B0aW9ucyhyZXF1ZXN0T3B0aW9ucyk7XHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmN0aW9uYWwvaW1tdXRhYmxlLWRhdGFcclxuICAgICAgICBtYXBwZWRSZXF1ZXN0T3B0aW9ucy5xdWVyeVBhcmFtZXRlcnNbJ1gtQWxnb2xpYS1Vc2VyLUlEJ10gPSB1c2VySUQ7XHJcbiAgICAgICAgcmV0dXJuIGJhc2UudHJhbnNwb3J0ZXIud3JpdGUoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uUG9zdCxcclxuICAgICAgICAgICAgcGF0aDogJzEvY2x1c3RlcnMvbWFwcGluZycsXHJcbiAgICAgICAgICAgIGRhdGE6IHsgY2x1c3RlcjogY2x1c3Rlck5hbWUgfSxcclxuICAgICAgICB9LCBtYXBwZWRSZXF1ZXN0T3B0aW9ucyk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBhc3NpZ25Vc2VySURzID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAodXNlcklEcywgY2x1c3Rlck5hbWUsIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGJhc2UudHJhbnNwb3J0ZXIud3JpdGUoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uUG9zdCxcclxuICAgICAgICAgICAgcGF0aDogJzEvY2x1c3RlcnMvbWFwcGluZy9iYXRjaCcsXHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIHVzZXJzOiB1c2VySURzLFxyXG4gICAgICAgICAgICAgICAgY2x1c3RlcjogY2x1c3Rlck5hbWUsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSwgcmVxdWVzdE9wdGlvbnMpO1xyXG4gICAgfTtcclxufTtcblxuY29uc3QgY2xlYXJEaWN0aW9uYXJ5RW50cmllcyA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKGRpY3Rpb25hcnksIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGNyZWF0ZVdhaXRhYmxlUHJvbWlzZShiYXNlLnRyYW5zcG9ydGVyLndyaXRlKHtcclxuICAgICAgICAgICAgbWV0aG9kOiBNZXRob2RFbnVtLlBvc3QsXHJcbiAgICAgICAgICAgIHBhdGg6IGVuY29kZSgnLzEvZGljdGlvbmFyaWVzLyVzL2JhdGNoJywgZGljdGlvbmFyeSksXHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIGNsZWFyRXhpc3RpbmdEaWN0aW9uYXJ5RW50cmllczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHJlcXVlc3RzOiB7IGFjdGlvbjogJ2FkZEVudHJ5JywgYm9keTogW10gfSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9LCByZXF1ZXN0T3B0aW9ucyksIChyZXNwb25zZSwgd2FpdFJlcXVlc3RPcHRpb25zKSA9PiB3YWl0QXBwVGFzayhiYXNlKShyZXNwb25zZS50YXNrSUQsIHdhaXRSZXF1ZXN0T3B0aW9ucykpO1xyXG4gICAgfTtcclxufTtcblxuY29uc3QgY29weUluZGV4ID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAoZnJvbSwgdG8sIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgY29uc3Qgd2FpdCA9IChyZXNwb25zZSwgd2FpdFJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBpbml0SW5kZXgoYmFzZSkoZnJvbSwge1xyXG4gICAgICAgICAgICAgICAgbWV0aG9kczogeyB3YWl0VGFzayB9LFxyXG4gICAgICAgICAgICB9KS53YWl0VGFzayhyZXNwb25zZS50YXNrSUQsIHdhaXRSZXF1ZXN0T3B0aW9ucyk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gY3JlYXRlV2FpdGFibGVQcm9taXNlKGJhc2UudHJhbnNwb3J0ZXIud3JpdGUoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uUG9zdCxcclxuICAgICAgICAgICAgcGF0aDogZW5jb2RlKCcxL2luZGV4ZXMvJXMvb3BlcmF0aW9uJywgZnJvbSksXHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIG9wZXJhdGlvbjogJ2NvcHknLFxyXG4gICAgICAgICAgICAgICAgZGVzdGluYXRpb246IHRvLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0sIHJlcXVlc3RPcHRpb25zKSwgd2FpdCk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBjb3B5UnVsZXMgPSAoYmFzZSkgPT4ge1xyXG4gICAgcmV0dXJuIChmcm9tLCB0bywgcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICByZXR1cm4gY29weUluZGV4KGJhc2UpKGZyb20sIHRvLCB7XHJcbiAgICAgICAgICAgIC4uLnJlcXVlc3RPcHRpb25zLFxyXG4gICAgICAgICAgICBzY29wZTogW1Njb3BlRW51bS5SdWxlc10sXHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBjb3B5U2V0dGluZ3MgPSAoYmFzZSkgPT4ge1xyXG4gICAgcmV0dXJuIChmcm9tLCB0bywgcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICByZXR1cm4gY29weUluZGV4KGJhc2UpKGZyb20sIHRvLCB7XHJcbiAgICAgICAgICAgIC4uLnJlcXVlc3RPcHRpb25zLFxyXG4gICAgICAgICAgICBzY29wZTogW1Njb3BlRW51bS5TZXR0aW5nc10sXHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBjb3B5U3lub255bXMgPSAoYmFzZSkgPT4ge1xyXG4gICAgcmV0dXJuIChmcm9tLCB0bywgcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICByZXR1cm4gY29weUluZGV4KGJhc2UpKGZyb20sIHRvLCB7XHJcbiAgICAgICAgICAgIC4uLnJlcXVlc3RPcHRpb25zLFxyXG4gICAgICAgICAgICBzY29wZTogW1Njb3BlRW51bS5TeW5vbnltc10sXHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBjdXN0b21SZXF1ZXN0ID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAocmVxdWVzdCwgcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICBpZiAocmVxdWVzdC5tZXRob2QgPT09IE1ldGhvZEVudW0uR2V0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBiYXNlLnRyYW5zcG9ydGVyLnJlYWQocmVxdWVzdCwgcmVxdWVzdE9wdGlvbnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYmFzZS50cmFuc3BvcnRlci53cml0ZShyZXF1ZXN0LCByZXF1ZXN0T3B0aW9ucyk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBkZWxldGVBcGlLZXkgPSAoYmFzZSkgPT4ge1xyXG4gICAgcmV0dXJuIChhcGlLZXksIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgY29uc3Qgd2FpdCA9IChfLCB3YWl0UmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZVJldHJ5YWJsZVByb21pc2UocmV0cnkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGdldEFwaUtleShiYXNlKShhcGlLZXksIHdhaXRSZXF1ZXN0T3B0aW9ucylcclxuICAgICAgICAgICAgICAgICAgICAudGhlbihyZXRyeSlcclxuICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKGFwaUVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFwaUVycm9yLnN0YXR1cyAhPT0gNDA0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGFwaUVycm9yO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiBjcmVhdGVXYWl0YWJsZVByb21pc2UoYmFzZS50cmFuc3BvcnRlci53cml0ZSh7XHJcbiAgICAgICAgICAgIG1ldGhvZDogTWV0aG9kRW51bS5EZWxldGUsXHJcbiAgICAgICAgICAgIHBhdGg6IGVuY29kZSgnMS9rZXlzLyVzJywgYXBpS2V5KSxcclxuICAgICAgICB9LCByZXF1ZXN0T3B0aW9ucyksIHdhaXQpO1xyXG4gICAgfTtcclxufTtcblxuY29uc3QgZGVsZXRlRGljdGlvbmFyeUVudHJpZXMgPSAoYmFzZSkgPT4ge1xyXG4gICAgcmV0dXJuIChkaWN0aW9uYXJ5LCBvYmplY3RJRHMsIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgY29uc3QgcmVxdWVzdHMgPSBvYmplY3RJRHMubWFwKG9iamVjdElEID0+ICh7XHJcbiAgICAgICAgICAgIGFjdGlvbjogJ2RlbGV0ZUVudHJ5JyxcclxuICAgICAgICAgICAgYm9keTogeyBvYmplY3RJRCB9LFxyXG4gICAgICAgIH0pKTtcclxuICAgICAgICByZXR1cm4gY3JlYXRlV2FpdGFibGVQcm9taXNlKGJhc2UudHJhbnNwb3J0ZXIud3JpdGUoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uUG9zdCxcclxuICAgICAgICAgICAgcGF0aDogZW5jb2RlKCcvMS9kaWN0aW9uYXJpZXMvJXMvYmF0Y2gnLCBkaWN0aW9uYXJ5KSxcclxuICAgICAgICAgICAgZGF0YTogeyBjbGVhckV4aXN0aW5nRGljdGlvbmFyeUVudHJpZXM6IGZhbHNlLCByZXF1ZXN0cyB9LFxyXG4gICAgICAgIH0sIHJlcXVlc3RPcHRpb25zKSwgKHJlc3BvbnNlLCB3YWl0UmVxdWVzdE9wdGlvbnMpID0+IHdhaXRBcHBUYXNrKGJhc2UpKHJlc3BvbnNlLnRhc2tJRCwgd2FpdFJlcXVlc3RPcHRpb25zKSk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBnZW5lcmF0ZVNlY3VyZWRBcGlLZXkgPSAoKSA9PiB7XHJcbiAgICByZXR1cm4gKHBhcmVudEFwaUtleSwgcmVzdHJpY3Rpb25zKSA9PiB7XHJcbiAgICAgICAgY29uc3QgcXVlcnlQYXJhbWV0ZXJzID0gc2VyaWFsaXplUXVlcnlQYXJhbWV0ZXJzKHJlc3RyaWN0aW9ucyk7XHJcbiAgICAgICAgY29uc3Qgc2VjdXJlZEtleSA9IGNyZWF0ZUhtYWMoJ3NoYTI1NicsIHBhcmVudEFwaUtleSlcclxuICAgICAgICAgICAgLnVwZGF0ZShxdWVyeVBhcmFtZXRlcnMpXHJcbiAgICAgICAgICAgIC5kaWdlc3QoJ2hleCcpO1xyXG4gICAgICAgIHJldHVybiBCdWZmZXIuZnJvbShzZWN1cmVkS2V5ICsgcXVlcnlQYXJhbWV0ZXJzKS50b1N0cmluZygnYmFzZTY0Jyk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBnZXRBcGlLZXkgPSAoYmFzZSkgPT4ge1xyXG4gICAgcmV0dXJuIChhcGlLZXksIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGJhc2UudHJhbnNwb3J0ZXIucmVhZCh7XHJcbiAgICAgICAgICAgIG1ldGhvZDogTWV0aG9kRW51bS5HZXQsXHJcbiAgICAgICAgICAgIHBhdGg6IGVuY29kZSgnMS9rZXlzLyVzJywgYXBpS2V5KSxcclxuICAgICAgICB9LCByZXF1ZXN0T3B0aW9ucyk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBnZXRBcHBUYXNrID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAodGFza0lELCByZXF1ZXN0T3B0aW9ucykgPT4ge1xyXG4gICAgICAgIHJldHVybiBiYXNlLnRyYW5zcG9ydGVyLnJlYWQoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uR2V0LFxyXG4gICAgICAgICAgICBwYXRoOiBlbmNvZGUoJzEvdGFzay8lcycsIHRhc2tJRC50b1N0cmluZygpKSxcclxuICAgICAgICB9LCByZXF1ZXN0T3B0aW9ucyk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBnZXREaWN0aW9uYXJ5U2V0dGluZ3MgPSAoYmFzZSkgPT4ge1xyXG4gICAgcmV0dXJuIChyZXF1ZXN0T3B0aW9ucykgPT4ge1xyXG4gICAgICAgIHJldHVybiBiYXNlLnRyYW5zcG9ydGVyLnJlYWQoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uR2V0LFxyXG4gICAgICAgICAgICBwYXRoOiAnLzEvZGljdGlvbmFyaWVzLyovc2V0dGluZ3MnLFxyXG4gICAgICAgIH0sIHJlcXVlc3RPcHRpb25zKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IGdldExvZ3MgPSAoYmFzZSkgPT4ge1xyXG4gICAgcmV0dXJuIChyZXF1ZXN0T3B0aW9ucykgPT4ge1xyXG4gICAgICAgIHJldHVybiBiYXNlLnRyYW5zcG9ydGVyLnJlYWQoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uR2V0LFxyXG4gICAgICAgICAgICBwYXRoOiAnMS9sb2dzJyxcclxuICAgICAgICB9LCByZXF1ZXN0T3B0aW9ucyk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBnZXRTZWN1cmVkQXBpS2V5UmVtYWluaW5nVmFsaWRpdHkgPSAoKSA9PiB7XHJcbiAgICByZXR1cm4gKHNlY3VyZWRBcGlLZXkpID0+IHtcclxuICAgICAgICBjb25zdCBkZWNvZGVkU3RyaW5nID0gQnVmZmVyLmZyb20oc2VjdXJlZEFwaUtleSwgJ2Jhc2U2NCcpLnRvU3RyaW5nKCdhc2NpaScpO1xyXG4gICAgICAgIGNvbnN0IHJlZ2V4ID0gL3ZhbGlkVW50aWw9KFxcZCspLztcclxuICAgICAgICBjb25zdCBtYXRjaCA9IGRlY29kZWRTdHJpbmcubWF0Y2gocmVnZXgpO1xyXG4gICAgICAgIGlmIChtYXRjaCA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aHJvdyBjcmVhdGVWYWxpZFVudGlsTm90Rm91bmRFcnJvcigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcGFyc2VJbnQobWF0Y2hbMV0sIDEwKSAtIE1hdGgucm91bmQobmV3IERhdGUoKS5nZXRUaW1lKCkgLyAxMDAwKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IGdldFRvcFVzZXJJRHMgPSAoYmFzZSkgPT4ge1xyXG4gICAgcmV0dXJuIChyZXF1ZXN0T3B0aW9ucykgPT4ge1xyXG4gICAgICAgIHJldHVybiBiYXNlLnRyYW5zcG9ydGVyLnJlYWQoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uR2V0LFxyXG4gICAgICAgICAgICBwYXRoOiAnMS9jbHVzdGVycy9tYXBwaW5nL3RvcCcsXHJcbiAgICAgICAgfSwgcmVxdWVzdE9wdGlvbnMpO1xyXG4gICAgfTtcclxufTtcblxuY29uc3QgZ2V0VXNlcklEID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAodXNlcklELCByZXF1ZXN0T3B0aW9ucykgPT4ge1xyXG4gICAgICAgIHJldHVybiBiYXNlLnRyYW5zcG9ydGVyLnJlYWQoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uR2V0LFxyXG4gICAgICAgICAgICBwYXRoOiBlbmNvZGUoJzEvY2x1c3RlcnMvbWFwcGluZy8lcycsIHVzZXJJRCksXHJcbiAgICAgICAgfSwgcmVxdWVzdE9wdGlvbnMpO1xyXG4gICAgfTtcclxufTtcblxuY29uc3QgaGFzUGVuZGluZ01hcHBpbmdzID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAocmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICBjb25zdCB7IHJldHJpZXZlTWFwcGluZ3MsIC4uLm9wdGlvbnMgfSA9IHJlcXVlc3RPcHRpb25zIHx8IHt9O1xyXG4gICAgICAgIGlmIChyZXRyaWV2ZU1hcHBpbmdzID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jdGlvbmFsL2ltbXV0YWJsZS1kYXRhXHJcbiAgICAgICAgICAgIG9wdGlvbnMuZ2V0Q2x1c3RlcnMgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYmFzZS50cmFuc3BvcnRlci5yZWFkKHtcclxuICAgICAgICAgICAgbWV0aG9kOiBNZXRob2RFbnVtLkdldCxcclxuICAgICAgICAgICAgcGF0aDogJzEvY2x1c3RlcnMvbWFwcGluZy9wZW5kaW5nJyxcclxuICAgICAgICB9LCBvcHRpb25zKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IGluaXRJbmRleCA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKGluZGV4TmFtZSwgb3B0aW9ucyA9IHt9KSA9PiB7XHJcbiAgICAgICAgY29uc3Qgc2VhcmNoSW5kZXggPSB7XHJcbiAgICAgICAgICAgIHRyYW5zcG9ydGVyOiBiYXNlLnRyYW5zcG9ydGVyLFxyXG4gICAgICAgICAgICBhcHBJZDogYmFzZS5hcHBJZCxcclxuICAgICAgICAgICAgaW5kZXhOYW1lLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIGFkZE1ldGhvZHMoc2VhcmNoSW5kZXgsIG9wdGlvbnMubWV0aG9kcyk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBsaXN0QXBpS2V5cyA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGJhc2UudHJhbnNwb3J0ZXIucmVhZCh7XHJcbiAgICAgICAgICAgIG1ldGhvZDogTWV0aG9kRW51bS5HZXQsXHJcbiAgICAgICAgICAgIHBhdGg6ICcxL2tleXMnLFxyXG4gICAgICAgIH0sIHJlcXVlc3RPcHRpb25zKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IGxpc3RDbHVzdGVycyA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGJhc2UudHJhbnNwb3J0ZXIucmVhZCh7XHJcbiAgICAgICAgICAgIG1ldGhvZDogTWV0aG9kRW51bS5HZXQsXHJcbiAgICAgICAgICAgIHBhdGg6ICcxL2NsdXN0ZXJzJyxcclxuICAgICAgICB9LCByZXF1ZXN0T3B0aW9ucyk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBsaXN0SW5kaWNlcyA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGJhc2UudHJhbnNwb3J0ZXIucmVhZCh7XHJcbiAgICAgICAgICAgIG1ldGhvZDogTWV0aG9kRW51bS5HZXQsXHJcbiAgICAgICAgICAgIHBhdGg6ICcxL2luZGV4ZXMnLFxyXG4gICAgICAgIH0sIHJlcXVlc3RPcHRpb25zKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IGxpc3RVc2VySURzID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAocmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICByZXR1cm4gYmFzZS50cmFuc3BvcnRlci5yZWFkKHtcclxuICAgICAgICAgICAgbWV0aG9kOiBNZXRob2RFbnVtLkdldCxcclxuICAgICAgICAgICAgcGF0aDogJzEvY2x1c3RlcnMvbWFwcGluZycsXHJcbiAgICAgICAgfSwgcmVxdWVzdE9wdGlvbnMpO1xyXG4gICAgfTtcclxufTtcblxuY29uc3QgbW92ZUluZGV4ID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAoZnJvbSwgdG8sIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgY29uc3Qgd2FpdCA9IChyZXNwb25zZSwgd2FpdFJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBpbml0SW5kZXgoYmFzZSkoZnJvbSwge1xyXG4gICAgICAgICAgICAgICAgbWV0aG9kczogeyB3YWl0VGFzayB9LFxyXG4gICAgICAgICAgICB9KS53YWl0VGFzayhyZXNwb25zZS50YXNrSUQsIHdhaXRSZXF1ZXN0T3B0aW9ucyk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gY3JlYXRlV2FpdGFibGVQcm9taXNlKGJhc2UudHJhbnNwb3J0ZXIud3JpdGUoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uUG9zdCxcclxuICAgICAgICAgICAgcGF0aDogZW5jb2RlKCcxL2luZGV4ZXMvJXMvb3BlcmF0aW9uJywgZnJvbSksXHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIG9wZXJhdGlvbjogJ21vdmUnLFxyXG4gICAgICAgICAgICAgICAgZGVzdGluYXRpb246IHRvLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0sIHJlcXVlc3RPcHRpb25zKSwgd2FpdCk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBtdWx0aXBsZUJhdGNoID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAocmVxdWVzdHMsIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgY29uc3Qgd2FpdCA9IChyZXNwb25zZSwgd2FpdFJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChPYmplY3Qua2V5cyhyZXNwb25zZS50YXNrSUQpLm1hcChpbmRleE5hbWUgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGluaXRJbmRleChiYXNlKShpbmRleE5hbWUsIHtcclxuICAgICAgICAgICAgICAgICAgICBtZXRob2RzOiB7IHdhaXRUYXNrIH0sXHJcbiAgICAgICAgICAgICAgICB9KS53YWl0VGFzayhyZXNwb25zZS50YXNrSURbaW5kZXhOYW1lXSwgd2FpdFJlcXVlc3RPcHRpb25zKTtcclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIGNyZWF0ZVdhaXRhYmxlUHJvbWlzZShiYXNlLnRyYW5zcG9ydGVyLndyaXRlKHtcclxuICAgICAgICAgICAgbWV0aG9kOiBNZXRob2RFbnVtLlBvc3QsXHJcbiAgICAgICAgICAgIHBhdGg6ICcxL2luZGV4ZXMvKi9iYXRjaCcsXHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIHJlcXVlc3RzLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0sIHJlcXVlc3RPcHRpb25zKSwgd2FpdCk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBtdWx0aXBsZUdldE9iamVjdHMgPSAoYmFzZSkgPT4ge1xyXG4gICAgcmV0dXJuIChyZXF1ZXN0cywgcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICByZXR1cm4gYmFzZS50cmFuc3BvcnRlci5yZWFkKHtcclxuICAgICAgICAgICAgbWV0aG9kOiBNZXRob2RFbnVtLlBvc3QsXHJcbiAgICAgICAgICAgIHBhdGg6ICcxL2luZGV4ZXMvKi9vYmplY3RzJyxcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgcmVxdWVzdHMsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSwgcmVxdWVzdE9wdGlvbnMpO1xyXG4gICAgfTtcclxufTtcblxuY29uc3QgbXVsdGlwbGVRdWVyaWVzID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAocXVlcmllcywgcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICBjb25zdCByZXF1ZXN0cyA9IHF1ZXJpZXMubWFwKHF1ZXJ5ID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIC4uLnF1ZXJ5LFxyXG4gICAgICAgICAgICAgICAgcGFyYW1zOiBzZXJpYWxpemVRdWVyeVBhcmFtZXRlcnMocXVlcnkucGFyYW1zIHx8IHt9KSxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gYmFzZS50cmFuc3BvcnRlci5yZWFkKHtcclxuICAgICAgICAgICAgbWV0aG9kOiBNZXRob2RFbnVtLlBvc3QsXHJcbiAgICAgICAgICAgIHBhdGg6ICcxL2luZGV4ZXMvKi9xdWVyaWVzJyxcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgcmVxdWVzdHMsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNhY2hlYWJsZTogdHJ1ZSxcclxuICAgICAgICB9LCByZXF1ZXN0T3B0aW9ucyk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBtdWx0aXBsZVNlYXJjaEZvckZhY2V0VmFsdWVzID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAocXVlcmllcywgcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwocXVlcmllcy5tYXAocXVlcnkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB7IGZhY2V0TmFtZSwgZmFjZXRRdWVyeSwgLi4ucGFyYW1zIH0gPSBxdWVyeS5wYXJhbXM7XHJcbiAgICAgICAgICAgIHJldHVybiBpbml0SW5kZXgoYmFzZSkocXVlcnkuaW5kZXhOYW1lLCB7XHJcbiAgICAgICAgICAgICAgICBtZXRob2RzOiB7IHNlYXJjaEZvckZhY2V0VmFsdWVzIH0sXHJcbiAgICAgICAgICAgIH0pLnNlYXJjaEZvckZhY2V0VmFsdWVzKGZhY2V0TmFtZSwgZmFjZXRRdWVyeSwge1xyXG4gICAgICAgICAgICAgICAgLi4ucmVxdWVzdE9wdGlvbnMsXHJcbiAgICAgICAgICAgICAgICAuLi5wYXJhbXMsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IHJlbW92ZVVzZXJJRCA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKHVzZXJJRCwgcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICBjb25zdCBtYXBwZWRSZXF1ZXN0T3B0aW9ucyA9IGNyZWF0ZU1hcHBlZFJlcXVlc3RPcHRpb25zKHJlcXVlc3RPcHRpb25zKTtcclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuY3Rpb25hbC9pbW11dGFibGUtZGF0YVxyXG4gICAgICAgIG1hcHBlZFJlcXVlc3RPcHRpb25zLnF1ZXJ5UGFyYW1ldGVyc1snWC1BbGdvbGlhLVVzZXItSUQnXSA9IHVzZXJJRDtcclxuICAgICAgICByZXR1cm4gYmFzZS50cmFuc3BvcnRlci53cml0ZSh7XHJcbiAgICAgICAgICAgIG1ldGhvZDogTWV0aG9kRW51bS5EZWxldGUsXHJcbiAgICAgICAgICAgIHBhdGg6ICcxL2NsdXN0ZXJzL21hcHBpbmcnLFxyXG4gICAgICAgIH0sIG1hcHBlZFJlcXVlc3RPcHRpb25zKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IHJlcGxhY2VEaWN0aW9uYXJ5RW50cmllcyA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKGRpY3Rpb25hcnksIGVudHJpZXMsIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgY29uc3QgcmVxdWVzdHMgPSBlbnRyaWVzLm1hcChlbnRyeSA9PiAoe1xyXG4gICAgICAgICAgICBhY3Rpb246ICdhZGRFbnRyeScsXHJcbiAgICAgICAgICAgIGJvZHk6IGVudHJ5LFxyXG4gICAgICAgIH0pKTtcclxuICAgICAgICByZXR1cm4gY3JlYXRlV2FpdGFibGVQcm9taXNlKGJhc2UudHJhbnNwb3J0ZXIud3JpdGUoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uUG9zdCxcclxuICAgICAgICAgICAgcGF0aDogZW5jb2RlKCcvMS9kaWN0aW9uYXJpZXMvJXMvYmF0Y2gnLCBkaWN0aW9uYXJ5KSxcclxuICAgICAgICAgICAgZGF0YTogeyBjbGVhckV4aXN0aW5nRGljdGlvbmFyeUVudHJpZXM6IHRydWUsIHJlcXVlc3RzIH0sXHJcbiAgICAgICAgfSwgcmVxdWVzdE9wdGlvbnMpLCAocmVzcG9uc2UsIHdhaXRSZXF1ZXN0T3B0aW9ucykgPT4gd2FpdEFwcFRhc2soYmFzZSkocmVzcG9uc2UudGFza0lELCB3YWl0UmVxdWVzdE9wdGlvbnMpKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IHJlc3RvcmVBcGlLZXkgPSAoYmFzZSkgPT4ge1xyXG4gICAgcmV0dXJuIChhcGlLZXksIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgY29uc3Qgd2FpdCA9IChfLCB3YWl0UmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZVJldHJ5YWJsZVByb21pc2UocmV0cnkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGdldEFwaUtleShiYXNlKShhcGlLZXksIHdhaXRSZXF1ZXN0T3B0aW9ucykuY2F0Y2goKGFwaUVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFwaUVycm9yLnN0YXR1cyAhPT0gNDA0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGFwaUVycm9yO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmV0cnkoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiBjcmVhdGVXYWl0YWJsZVByb21pc2UoYmFzZS50cmFuc3BvcnRlci53cml0ZSh7XHJcbiAgICAgICAgICAgIG1ldGhvZDogTWV0aG9kRW51bS5Qb3N0LFxyXG4gICAgICAgICAgICBwYXRoOiBlbmNvZGUoJzEva2V5cy8lcy9yZXN0b3JlJywgYXBpS2V5KSxcclxuICAgICAgICB9LCByZXF1ZXN0T3B0aW9ucyksIHdhaXQpO1xyXG4gICAgfTtcclxufTtcblxuY29uc3Qgc2F2ZURpY3Rpb25hcnlFbnRyaWVzID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAoZGljdGlvbmFyeSwgZW50cmllcywgcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICBjb25zdCByZXF1ZXN0cyA9IGVudHJpZXMubWFwKGVudHJ5ID0+ICh7XHJcbiAgICAgICAgICAgIGFjdGlvbjogJ2FkZEVudHJ5JyxcclxuICAgICAgICAgICAgYm9keTogZW50cnksXHJcbiAgICAgICAgfSkpO1xyXG4gICAgICAgIHJldHVybiBjcmVhdGVXYWl0YWJsZVByb21pc2UoYmFzZS50cmFuc3BvcnRlci53cml0ZSh7XHJcbiAgICAgICAgICAgIG1ldGhvZDogTWV0aG9kRW51bS5Qb3N0LFxyXG4gICAgICAgICAgICBwYXRoOiBlbmNvZGUoJy8xL2RpY3Rpb25hcmllcy8lcy9iYXRjaCcsIGRpY3Rpb25hcnkpLFxyXG4gICAgICAgICAgICBkYXRhOiB7IGNsZWFyRXhpc3RpbmdEaWN0aW9uYXJ5RW50cmllczogZmFsc2UsIHJlcXVlc3RzIH0sXHJcbiAgICAgICAgfSwgcmVxdWVzdE9wdGlvbnMpLCAocmVzcG9uc2UsIHdhaXRSZXF1ZXN0T3B0aW9ucykgPT4gd2FpdEFwcFRhc2soYmFzZSkocmVzcG9uc2UudGFza0lELCB3YWl0UmVxdWVzdE9wdGlvbnMpKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IHNlYXJjaERpY3Rpb25hcnlFbnRyaWVzID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAoZGljdGlvbmFyeSwgcXVlcnksIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGJhc2UudHJhbnNwb3J0ZXIucmVhZCh7XHJcbiAgICAgICAgICAgIG1ldGhvZDogTWV0aG9kRW51bS5Qb3N0LFxyXG4gICAgICAgICAgICBwYXRoOiBlbmNvZGUoJy8xL2RpY3Rpb25hcmllcy8lcy9zZWFyY2gnLCBkaWN0aW9uYXJ5KSxcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgcXVlcnksXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNhY2hlYWJsZTogdHJ1ZSxcclxuICAgICAgICB9LCByZXF1ZXN0T3B0aW9ucyk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBzZWFyY2hVc2VySURzID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAocXVlcnksIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGJhc2UudHJhbnNwb3J0ZXIucmVhZCh7XHJcbiAgICAgICAgICAgIG1ldGhvZDogTWV0aG9kRW51bS5Qb3N0LFxyXG4gICAgICAgICAgICBwYXRoOiAnMS9jbHVzdGVycy9tYXBwaW5nL3NlYXJjaCcsXHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIHF1ZXJ5LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0sIHJlcXVlc3RPcHRpb25zKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IHNldERpY3Rpb25hcnlTZXR0aW5ncyA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKHNldHRpbmdzLCByZXF1ZXN0T3B0aW9ucykgPT4ge1xyXG4gICAgICAgIHJldHVybiBjcmVhdGVXYWl0YWJsZVByb21pc2UoYmFzZS50cmFuc3BvcnRlci53cml0ZSh7XHJcbiAgICAgICAgICAgIG1ldGhvZDogTWV0aG9kRW51bS5QdXQsXHJcbiAgICAgICAgICAgIHBhdGg6ICcvMS9kaWN0aW9uYXJpZXMvKi9zZXR0aW5ncycsXHJcbiAgICAgICAgICAgIGRhdGE6IHNldHRpbmdzLFxyXG4gICAgICAgIH0sIHJlcXVlc3RPcHRpb25zKSwgKHJlc3BvbnNlLCB3YWl0UmVxdWVzdE9wdGlvbnMpID0+IHdhaXRBcHBUYXNrKGJhc2UpKHJlc3BvbnNlLnRhc2tJRCwgd2FpdFJlcXVlc3RPcHRpb25zKSk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCB1cGRhdGVBcGlLZXkgPSAoYmFzZSkgPT4ge1xyXG4gICAgcmV0dXJuIChhcGlLZXksIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgY29uc3QgdXBkYXRlZEZpZWxkcyA9IE9iamVjdC5hc3NpZ24oe30sIHJlcXVlc3RPcHRpb25zKTtcclxuICAgICAgICBjb25zdCB7IHF1ZXJ5UGFyYW1ldGVycywgLi4ub3B0aW9ucyB9ID0gcmVxdWVzdE9wdGlvbnMgfHwge307XHJcbiAgICAgICAgY29uc3QgZGF0YSA9IHF1ZXJ5UGFyYW1ldGVycyA/IHsgcXVlcnlQYXJhbWV0ZXJzIH0gOiB7fTtcclxuICAgICAgICBjb25zdCBhcGlLZXlGaWVsZHMgPSBbXHJcbiAgICAgICAgICAgICdhY2wnLFxyXG4gICAgICAgICAgICAnaW5kZXhlcycsXHJcbiAgICAgICAgICAgICdyZWZlcmVycycsXHJcbiAgICAgICAgICAgICdyZXN0cmljdFNvdXJjZXMnLFxyXG4gICAgICAgICAgICAncXVlcnlQYXJhbWV0ZXJzJyxcclxuICAgICAgICAgICAgJ2Rlc2NyaXB0aW9uJyxcclxuICAgICAgICAgICAgJ21heFF1ZXJpZXNQZXJJUFBlckhvdXInLFxyXG4gICAgICAgICAgICAnbWF4SGl0c1BlclF1ZXJ5JyxcclxuICAgICAgICBdO1xyXG4gICAgICAgIC8vIENoZWNrIHRoYXQgYWxsIHRoZSBmaWVsZHMgcmV0cmlldmVkIHRocm91Z2ggZ2V0QXBpS2V5IGFyZSB0aGUgc2FtZSBhcyB0aGUgb25lcyB3ZSB3YW50ZWQgdG8gdXBkYXRlXHJcbiAgICAgICAgY29uc3QgaGFzQ2hhbmdlZCA9IChnZXRBcGlLZXlSZXNwb25zZSkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmtleXModXBkYXRlZEZpZWxkcylcclxuICAgICAgICAgICAgICAgIC5maWx0ZXIoKHVwZGF0ZWRGaWVsZCkgPT4gYXBpS2V5RmllbGRzLmluZGV4T2YodXBkYXRlZEZpZWxkKSAhPT0gLTEpXHJcbiAgICAgICAgICAgICAgICAuZXZlcnkodXBkYXRlZEZpZWxkID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIElmIHRoZSBmaWVsZCBpcyBhbiBhcnJheSwgd2UgbmVlZCB0byBjaGVjayB0aGF0IHRoZXkgYXJlIHRoZSBzYW1lIGxlbmd0aCBhbmQgdGhhdCBhbGwgdGhlIHZhbHVlcyBhcmUgdGhlIHNhbWVcclxuICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGdldEFwaUtleVJlc3BvbnNlW3VwZGF0ZWRGaWVsZF0pICYmXHJcbiAgICAgICAgICAgICAgICAgICAgQXJyYXkuaXNBcnJheSh1cGRhdGVkRmllbGRzW3VwZGF0ZWRGaWVsZF0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZ2V0QXBpS2V5UmVzcG9uc2VBcnJheSA9IGdldEFwaUtleVJlc3BvbnNlW3VwZGF0ZWRGaWVsZF07XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChnZXRBcGlLZXlSZXNwb25zZUFycmF5Lmxlbmd0aCA9PT0gdXBkYXRlZEZpZWxkc1t1cGRhdGVkRmllbGRdLmxlbmd0aCAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBnZXRBcGlLZXlSZXNwb25zZUFycmF5LmV2ZXJ5KCh2YWx1ZSwgaW5kZXgpID0+IHZhbHVlID09PSB1cGRhdGVkRmllbGRzW3VwZGF0ZWRGaWVsZF1baW5kZXhdKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2V0QXBpS2V5UmVzcG9uc2VbdXBkYXRlZEZpZWxkXSA9PT0gdXBkYXRlZEZpZWxkc1t1cGRhdGVkRmllbGRdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbnN0IHdhaXQgPSAoXywgd2FpdFJlcXVlc3RPcHRpb25zKSA9PiBjcmVhdGVSZXRyeWFibGVQcm9taXNlKHJldHJ5ID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIGdldEFwaUtleShiYXNlKShhcGlLZXksIHdhaXRSZXF1ZXN0T3B0aW9ucykudGhlbihnZXRBcGlLZXlSZXNwb25zZSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaGFzQ2hhbmdlZChnZXRBcGlLZXlSZXNwb25zZSkgPyBQcm9taXNlLnJlc29sdmUoKSA6IHJldHJ5KCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBjcmVhdGVXYWl0YWJsZVByb21pc2UoYmFzZS50cmFuc3BvcnRlci53cml0ZSh7XHJcbiAgICAgICAgICAgIG1ldGhvZDogTWV0aG9kRW51bS5QdXQsXHJcbiAgICAgICAgICAgIHBhdGg6IGVuY29kZSgnMS9rZXlzLyVzJywgYXBpS2V5KSxcclxuICAgICAgICAgICAgZGF0YSxcclxuICAgICAgICB9LCBvcHRpb25zKSwgd2FpdCk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCB3YWl0QXBwVGFzayA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKHRhc2tJRCwgcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICByZXR1cm4gY3JlYXRlUmV0cnlhYmxlUHJvbWlzZShyZXRyeSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBnZXRBcHBUYXNrKGJhc2UpKHRhc2tJRCwgcmVxdWVzdE9wdGlvbnMpLnRoZW4ocmVzcG9uc2UgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLnN0YXR1cyAhPT0gJ3B1Ymxpc2hlZCcgPyByZXRyeSgpIDogdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IGJhdGNoID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAocmVxdWVzdHMsIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgY29uc3Qgd2FpdCA9IChyZXNwb25zZSwgd2FpdFJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiB3YWl0VGFzayhiYXNlKShyZXNwb25zZS50YXNrSUQsIHdhaXRSZXF1ZXN0T3B0aW9ucyk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gY3JlYXRlV2FpdGFibGVQcm9taXNlKGJhc2UudHJhbnNwb3J0ZXIud3JpdGUoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uUG9zdCxcclxuICAgICAgICAgICAgcGF0aDogZW5jb2RlKCcxL2luZGV4ZXMvJXMvYmF0Y2gnLCBiYXNlLmluZGV4TmFtZSksXHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIHJlcXVlc3RzLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0sIHJlcXVlc3RPcHRpb25zKSwgd2FpdCk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBicm93c2VPYmplY3RzID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAocmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICByZXR1cm4gY3JlYXRlQnJvd3NhYmxlUHJvbWlzZSh7XHJcbiAgICAgICAgICAgIHNob3VsZFN0b3A6IHJlc3BvbnNlID0+IHJlc3BvbnNlLmN1cnNvciA9PT0gdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAuLi5yZXF1ZXN0T3B0aW9ucyxcclxuICAgICAgICAgICAgcmVxdWVzdDogKGRhdGEpID0+IGJhc2UudHJhbnNwb3J0ZXIucmVhZCh7XHJcbiAgICAgICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uUG9zdCxcclxuICAgICAgICAgICAgICAgIHBhdGg6IGVuY29kZSgnMS9pbmRleGVzLyVzL2Jyb3dzZScsIGJhc2UuaW5kZXhOYW1lKSxcclxuICAgICAgICAgICAgICAgIGRhdGEsXHJcbiAgICAgICAgICAgIH0sIHJlcXVlc3RPcHRpb25zKSxcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IGJyb3dzZVJ1bGVzID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAocmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICBjb25zdCBvcHRpb25zID0ge1xyXG4gICAgICAgICAgICBoaXRzUGVyUGFnZTogMTAwMCxcclxuICAgICAgICAgICAgLi4ucmVxdWVzdE9wdGlvbnMsXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gY3JlYXRlQnJvd3NhYmxlUHJvbWlzZSh7XHJcbiAgICAgICAgICAgIHNob3VsZFN0b3A6IHJlc3BvbnNlID0+IHJlc3BvbnNlLmhpdHMubGVuZ3RoIDwgb3B0aW9ucy5oaXRzUGVyUGFnZSxcclxuICAgICAgICAgICAgLi4ub3B0aW9ucyxcclxuICAgICAgICAgICAgcmVxdWVzdChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc2VhcmNoUnVsZXMoYmFzZSkoJycsIHsgLi4ub3B0aW9ucywgLi4uZGF0YSB9KS50aGVuKChyZXNwb25zZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLnJlc3BvbnNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoaXRzOiByZXNwb25zZS5oaXRzLm1hcChydWxlID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jdGlvbmFsL2ltbXV0YWJsZS1kYXRhLG5vLXBhcmFtLXJlYXNzaWduXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgcnVsZS5faGlnaGxpZ2h0UmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJ1bGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IGJyb3dzZVN5bm9ueW1zID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAocmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICBjb25zdCBvcHRpb25zID0ge1xyXG4gICAgICAgICAgICBoaXRzUGVyUGFnZTogMTAwMCxcclxuICAgICAgICAgICAgLi4ucmVxdWVzdE9wdGlvbnMsXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gY3JlYXRlQnJvd3NhYmxlUHJvbWlzZSh7XHJcbiAgICAgICAgICAgIHNob3VsZFN0b3A6IHJlc3BvbnNlID0+IHJlc3BvbnNlLmhpdHMubGVuZ3RoIDwgb3B0aW9ucy5oaXRzUGVyUGFnZSxcclxuICAgICAgICAgICAgLi4ub3B0aW9ucyxcclxuICAgICAgICAgICAgcmVxdWVzdChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc2VhcmNoU3lub255bXMoYmFzZSkoJycsIHsgLi4ub3B0aW9ucywgLi4uZGF0YSB9KS50aGVuKChyZXNwb25zZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLnJlc3BvbnNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoaXRzOiByZXNwb25zZS5oaXRzLm1hcChzeW5vbnltID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jdGlvbmFsL2ltbXV0YWJsZS1kYXRhLG5vLXBhcmFtLXJlYXNzaWduXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgc3lub255bS5faGlnaGxpZ2h0UmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN5bm9ueW07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IGNodW5rZWRCYXRjaCA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKGJvZGllcywgYWN0aW9uLCByZXF1ZXN0T3B0aW9ucykgPT4ge1xyXG4gICAgICAgIGNvbnN0IHsgYmF0Y2hTaXplLCAuLi5vcHRpb25zIH0gPSByZXF1ZXN0T3B0aW9ucyB8fCB7fTtcclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IHtcclxuICAgICAgICAgICAgdGFza0lEczogW10sXHJcbiAgICAgICAgICAgIG9iamVjdElEczogW10sXHJcbiAgICAgICAgfTtcclxuICAgICAgICBjb25zdCBmb3JFYWNoQmF0Y2ggPSAobGFzdEluZGV4ID0gMCkgPT4ge1xyXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuY3Rpb25hbC9wcmVmZXItcmVhZG9ubHktdHlwZVxyXG4gICAgICAgICAgICBjb25zdCBib2RpZXNDaHVuayA9IFtdO1xyXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuY3Rpb25hbC9uby1sZXRcclxuICAgICAgICAgICAgbGV0IGluZGV4O1xyXG4gICAgICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuY3Rpb25hbC9uby1sb29wLXN0YXRlbWVudCAqL1xyXG4gICAgICAgICAgICBmb3IgKGluZGV4ID0gbGFzdEluZGV4OyBpbmRleCA8IGJvZGllcy5sZW5ndGg7IGluZGV4KyspIHtcclxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jdGlvbmFsL2ltbXV0YWJsZS1kYXRhXHJcbiAgICAgICAgICAgICAgICBib2RpZXNDaHVuay5wdXNoKGJvZGllc1tpbmRleF0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKGJvZGllc0NodW5rLmxlbmd0aCA9PT0gKGJhdGNoU2l6ZSB8fCAxMDAwKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChib2RpZXNDaHVuay5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzcG9uc2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBiYXRjaChiYXNlKShib2RpZXNDaHVuay5tYXAoYm9keSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbixcclxuICAgICAgICAgICAgICAgICAgICBib2R5LFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfSksIG9wdGlvbnMpLnRoZW4ocmVzID0+IHtcclxuICAgICAgICAgICAgICAgIHJlc3BvbnNlLm9iamVjdElEcyA9IHJlc3BvbnNlLm9iamVjdElEcy5jb25jYXQocmVzLm9iamVjdElEcyk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgZnVuY3Rpb25hbC9pbW11dGFibGUtZGF0YVxyXG4gICAgICAgICAgICAgICAgcmVzcG9uc2UudGFza0lEcy5wdXNoKHJlcy50YXNrSUQpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGZ1bmN0aW9uYWwvaW1tdXRhYmxlLWRhdGFcclxuICAgICAgICAgICAgICAgIGluZGV4Kys7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZm9yRWFjaEJhdGNoKGluZGV4KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gY3JlYXRlV2FpdGFibGVQcm9taXNlKGZvckVhY2hCYXRjaCgpLCAoY2h1bmtlZEJhdGNoUmVzcG9uc2UsIHdhaXRSZXF1ZXN0T3B0aW9ucykgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoY2h1bmtlZEJhdGNoUmVzcG9uc2UudGFza0lEcy5tYXAodGFza0lEID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB3YWl0VGFzayhiYXNlKSh0YXNrSUQsIHdhaXRSZXF1ZXN0T3B0aW9ucyk7XHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IGNsZWFyT2JqZWN0cyA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGNyZWF0ZVdhaXRhYmxlUHJvbWlzZShiYXNlLnRyYW5zcG9ydGVyLndyaXRlKHtcclxuICAgICAgICAgICAgbWV0aG9kOiBNZXRob2RFbnVtLlBvc3QsXHJcbiAgICAgICAgICAgIHBhdGg6IGVuY29kZSgnMS9pbmRleGVzLyVzL2NsZWFyJywgYmFzZS5pbmRleE5hbWUpLFxyXG4gICAgICAgIH0sIHJlcXVlc3RPcHRpb25zKSwgKHJlc3BvbnNlLCB3YWl0UmVxdWVzdE9wdGlvbnMpID0+IHdhaXRUYXNrKGJhc2UpKHJlc3BvbnNlLnRhc2tJRCwgd2FpdFJlcXVlc3RPcHRpb25zKSk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBjbGVhclJ1bGVzID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAocmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICBjb25zdCB7IGZvcndhcmRUb1JlcGxpY2FzLCAuLi5vcHRpb25zIH0gPSByZXF1ZXN0T3B0aW9ucyB8fCB7fTtcclxuICAgICAgICBjb25zdCBtYXBwZWRSZXF1ZXN0T3B0aW9ucyA9IGNyZWF0ZU1hcHBlZFJlcXVlc3RPcHRpb25zKG9wdGlvbnMpO1xyXG4gICAgICAgIGlmIChmb3J3YXJkVG9SZXBsaWNhcykge1xyXG4gICAgICAgICAgICBtYXBwZWRSZXF1ZXN0T3B0aW9ucy5xdWVyeVBhcmFtZXRlcnMuZm9yd2FyZFRvUmVwbGljYXMgPSAxOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGZ1bmN0aW9uYWwvaW1tdXRhYmxlLWRhdGFcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGNyZWF0ZVdhaXRhYmxlUHJvbWlzZShiYXNlLnRyYW5zcG9ydGVyLndyaXRlKHtcclxuICAgICAgICAgICAgbWV0aG9kOiBNZXRob2RFbnVtLlBvc3QsXHJcbiAgICAgICAgICAgIHBhdGg6IGVuY29kZSgnMS9pbmRleGVzLyVzL3J1bGVzL2NsZWFyJywgYmFzZS5pbmRleE5hbWUpLFxyXG4gICAgICAgIH0sIG1hcHBlZFJlcXVlc3RPcHRpb25zKSwgKHJlc3BvbnNlLCB3YWl0UmVxdWVzdE9wdGlvbnMpID0+IHdhaXRUYXNrKGJhc2UpKHJlc3BvbnNlLnRhc2tJRCwgd2FpdFJlcXVlc3RPcHRpb25zKSk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBjbGVhclN5bm9ueW1zID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAocmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICBjb25zdCB7IGZvcndhcmRUb1JlcGxpY2FzLCAuLi5vcHRpb25zIH0gPSByZXF1ZXN0T3B0aW9ucyB8fCB7fTtcclxuICAgICAgICBjb25zdCBtYXBwZWRSZXF1ZXN0T3B0aW9ucyA9IGNyZWF0ZU1hcHBlZFJlcXVlc3RPcHRpb25zKG9wdGlvbnMpO1xyXG4gICAgICAgIGlmIChmb3J3YXJkVG9SZXBsaWNhcykge1xyXG4gICAgICAgICAgICBtYXBwZWRSZXF1ZXN0T3B0aW9ucy5xdWVyeVBhcmFtZXRlcnMuZm9yd2FyZFRvUmVwbGljYXMgPSAxOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGZ1bmN0aW9uYWwvaW1tdXRhYmxlLWRhdGFcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGNyZWF0ZVdhaXRhYmxlUHJvbWlzZShiYXNlLnRyYW5zcG9ydGVyLndyaXRlKHtcclxuICAgICAgICAgICAgbWV0aG9kOiBNZXRob2RFbnVtLlBvc3QsXHJcbiAgICAgICAgICAgIHBhdGg6IGVuY29kZSgnMS9pbmRleGVzLyVzL3N5bm9ueW1zL2NsZWFyJywgYmFzZS5pbmRleE5hbWUpLFxyXG4gICAgICAgIH0sIG1hcHBlZFJlcXVlc3RPcHRpb25zKSwgKHJlc3BvbnNlLCB3YWl0UmVxdWVzdE9wdGlvbnMpID0+IHdhaXRUYXNrKGJhc2UpKHJlc3BvbnNlLnRhc2tJRCwgd2FpdFJlcXVlc3RPcHRpb25zKSk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBkZWxldGVCeSA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKGZpbHRlcnMsIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGNyZWF0ZVdhaXRhYmxlUHJvbWlzZShiYXNlLnRyYW5zcG9ydGVyLndyaXRlKHtcclxuICAgICAgICAgICAgbWV0aG9kOiBNZXRob2RFbnVtLlBvc3QsXHJcbiAgICAgICAgICAgIHBhdGg6IGVuY29kZSgnMS9pbmRleGVzLyVzL2RlbGV0ZUJ5UXVlcnknLCBiYXNlLmluZGV4TmFtZSksXHJcbiAgICAgICAgICAgIGRhdGE6IGZpbHRlcnMsXHJcbiAgICAgICAgfSwgcmVxdWVzdE9wdGlvbnMpLCAocmVzcG9uc2UsIHdhaXRSZXF1ZXN0T3B0aW9ucykgPT4gd2FpdFRhc2soYmFzZSkocmVzcG9uc2UudGFza0lELCB3YWl0UmVxdWVzdE9wdGlvbnMpKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IGRlbGV0ZUluZGV4ID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAocmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICByZXR1cm4gY3JlYXRlV2FpdGFibGVQcm9taXNlKGJhc2UudHJhbnNwb3J0ZXIud3JpdGUoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uRGVsZXRlLFxyXG4gICAgICAgICAgICBwYXRoOiBlbmNvZGUoJzEvaW5kZXhlcy8lcycsIGJhc2UuaW5kZXhOYW1lKSxcclxuICAgICAgICB9LCByZXF1ZXN0T3B0aW9ucyksIChyZXNwb25zZSwgd2FpdFJlcXVlc3RPcHRpb25zKSA9PiB3YWl0VGFzayhiYXNlKShyZXNwb25zZS50YXNrSUQsIHdhaXRSZXF1ZXN0T3B0aW9ucykpO1xyXG4gICAgfTtcclxufTtcblxuY29uc3QgZGVsZXRlT2JqZWN0ID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAob2JqZWN0SUQsIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGNyZWF0ZVdhaXRhYmxlUHJvbWlzZShkZWxldGVPYmplY3RzKGJhc2UpKFtvYmplY3RJRF0sIHJlcXVlc3RPcHRpb25zKS50aGVuKHJlc3BvbnNlID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgdGFza0lEOiByZXNwb25zZS50YXNrSURzWzBdIH07XHJcbiAgICAgICAgfSksIChyZXNwb25zZSwgd2FpdFJlcXVlc3RPcHRpb25zKSA9PiB3YWl0VGFzayhiYXNlKShyZXNwb25zZS50YXNrSUQsIHdhaXRSZXF1ZXN0T3B0aW9ucykpO1xyXG4gICAgfTtcclxufTtcblxuY29uc3QgZGVsZXRlT2JqZWN0cyA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKG9iamVjdElEcywgcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICBjb25zdCBvYmplY3RzID0gb2JqZWN0SURzLm1hcChvYmplY3RJRCA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IG9iamVjdElEIH07XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGNodW5rZWRCYXRjaChiYXNlKShvYmplY3RzLCBCYXRjaEFjdGlvbkVudW0uRGVsZXRlT2JqZWN0LCByZXF1ZXN0T3B0aW9ucyk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBkZWxldGVSdWxlID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAob2JqZWN0SUQsIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgY29uc3QgeyBmb3J3YXJkVG9SZXBsaWNhcywgLi4ub3B0aW9ucyB9ID0gcmVxdWVzdE9wdGlvbnMgfHwge307XHJcbiAgICAgICAgY29uc3QgbWFwcGVkUmVxdWVzdE9wdGlvbnMgPSBjcmVhdGVNYXBwZWRSZXF1ZXN0T3B0aW9ucyhvcHRpb25zKTtcclxuICAgICAgICBpZiAoZm9yd2FyZFRvUmVwbGljYXMpIHtcclxuICAgICAgICAgICAgbWFwcGVkUmVxdWVzdE9wdGlvbnMucXVlcnlQYXJhbWV0ZXJzLmZvcndhcmRUb1JlcGxpY2FzID0gMTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBmdW5jdGlvbmFsL2ltbXV0YWJsZS1kYXRhXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjcmVhdGVXYWl0YWJsZVByb21pc2UoYmFzZS50cmFuc3BvcnRlci53cml0ZSh7XHJcbiAgICAgICAgICAgIG1ldGhvZDogTWV0aG9kRW51bS5EZWxldGUsXHJcbiAgICAgICAgICAgIHBhdGg6IGVuY29kZSgnMS9pbmRleGVzLyVzL3J1bGVzLyVzJywgYmFzZS5pbmRleE5hbWUsIG9iamVjdElEKSxcclxuICAgICAgICB9LCBtYXBwZWRSZXF1ZXN0T3B0aW9ucyksIChyZXNwb25zZSwgd2FpdFJlcXVlc3RPcHRpb25zKSA9PiB3YWl0VGFzayhiYXNlKShyZXNwb25zZS50YXNrSUQsIHdhaXRSZXF1ZXN0T3B0aW9ucykpO1xyXG4gICAgfTtcclxufTtcblxuY29uc3QgZGVsZXRlU3lub255bSA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKG9iamVjdElELCByZXF1ZXN0T3B0aW9ucykgPT4ge1xyXG4gICAgICAgIGNvbnN0IHsgZm9yd2FyZFRvUmVwbGljYXMsIC4uLm9wdGlvbnMgfSA9IHJlcXVlc3RPcHRpb25zIHx8IHt9O1xyXG4gICAgICAgIGNvbnN0IG1hcHBlZFJlcXVlc3RPcHRpb25zID0gY3JlYXRlTWFwcGVkUmVxdWVzdE9wdGlvbnMob3B0aW9ucyk7XHJcbiAgICAgICAgaWYgKGZvcndhcmRUb1JlcGxpY2FzKSB7XHJcbiAgICAgICAgICAgIG1hcHBlZFJlcXVlc3RPcHRpb25zLnF1ZXJ5UGFyYW1ldGVycy5mb3J3YXJkVG9SZXBsaWNhcyA9IDE7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgZnVuY3Rpb25hbC9pbW11dGFibGUtZGF0YVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY3JlYXRlV2FpdGFibGVQcm9taXNlKGJhc2UudHJhbnNwb3J0ZXIud3JpdGUoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uRGVsZXRlLFxyXG4gICAgICAgICAgICBwYXRoOiBlbmNvZGUoJzEvaW5kZXhlcy8lcy9zeW5vbnltcy8lcycsIGJhc2UuaW5kZXhOYW1lLCBvYmplY3RJRCksXHJcbiAgICAgICAgfSwgbWFwcGVkUmVxdWVzdE9wdGlvbnMpLCAocmVzcG9uc2UsIHdhaXRSZXF1ZXN0T3B0aW9ucykgPT4gd2FpdFRhc2soYmFzZSkocmVzcG9uc2UudGFza0lELCB3YWl0UmVxdWVzdE9wdGlvbnMpKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IGV4aXN0cyA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGdldFNldHRpbmdzKGJhc2UpKHJlcXVlc3RPcHRpb25zKVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB0cnVlKVxyXG4gICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZXJyb3Iuc3RhdHVzICE9PSA0MDQpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IGZpbmRBbnN3ZXJzID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAocXVlcnksIHF1ZXJ5TGFuZ3VhZ2VzLCByZXF1ZXN0T3B0aW9ucykgPT4ge1xyXG4gICAgICAgIHJldHVybiBiYXNlLnRyYW5zcG9ydGVyLnJlYWQoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uUG9zdCxcclxuICAgICAgICAgICAgcGF0aDogZW5jb2RlKCcxL2Fuc3dlcnMvJXMvcHJlZGljdGlvbicsIGJhc2UuaW5kZXhOYW1lKSxcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgcXVlcnksXHJcbiAgICAgICAgICAgICAgICBxdWVyeUxhbmd1YWdlcyxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgY2FjaGVhYmxlOiB0cnVlLFxyXG4gICAgICAgIH0sIHJlcXVlc3RPcHRpb25zKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IGZpbmRPYmplY3QgPSAoYmFzZSkgPT4ge1xyXG4gICAgcmV0dXJuIChjYWxsYmFjaywgcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICBjb25zdCB7IHF1ZXJ5LCBwYWdpbmF0ZSwgLi4ub3B0aW9ucyB9ID0gcmVxdWVzdE9wdGlvbnMgfHwge307XHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmN0aW9uYWwvbm8tbGV0XHJcbiAgICAgICAgbGV0IHBhZ2UgPSAwO1xyXG4gICAgICAgIGNvbnN0IGZvckVhY2hQYWdlID0gKCkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gc2VhcmNoKGJhc2UpKHF1ZXJ5IHx8ICcnLCB7IC4uLm9wdGlvbnMsIHBhZ2UgfSkudGhlbihyZXN1bHQgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmN0aW9uYWwvbm8tbG9vcC1zdGF0ZW1lbnRcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgW3Bvc2l0aW9uLCBoaXRdIG9mIE9iamVjdC5lbnRyaWVzKHJlc3VsdC5oaXRzKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcm9taXNlL25vLWNhbGxiYWNrLWluLXByb21pc2VcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2soaGl0KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0OiBoaXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogcGFyc2VJbnQocG9zaXRpb24sIDEwKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcGFnZSsrO1xyXG4gICAgICAgICAgICAgICAgLy8gcGFnaW5hdGUgaWYgb3B0aW9uIHdhcyBzZXQgYW5kIGhhcyBuZXh0IHBhZ2VcclxuICAgICAgICAgICAgICAgIGlmIChwYWdpbmF0ZSA9PT0gZmFsc2UgfHwgcGFnZSA+PSByZXN1bHQubmJQYWdlcykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IGNyZWF0ZU9iamVjdE5vdEZvdW5kRXJyb3IoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBmb3JFYWNoUGFnZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiBmb3JFYWNoUGFnZSgpO1xyXG4gICAgfTtcclxufTtcblxuY29uc3QgZ2V0T2JqZWN0ID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAob2JqZWN0SUQsIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGJhc2UudHJhbnNwb3J0ZXIucmVhZCh7XHJcbiAgICAgICAgICAgIG1ldGhvZDogTWV0aG9kRW51bS5HZXQsXHJcbiAgICAgICAgICAgIHBhdGg6IGVuY29kZSgnMS9pbmRleGVzLyVzLyVzJywgYmFzZS5pbmRleE5hbWUsIG9iamVjdElEKSxcclxuICAgICAgICB9LCByZXF1ZXN0T3B0aW9ucyk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBnZXRPYmplY3RQb3NpdGlvbiA9ICgpID0+IHtcclxuICAgIHJldHVybiAoc2VhcmNoUmVzcG9uc2UsIG9iamVjdElEKSA9PiB7XHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmN0aW9uYWwvbm8tbG9vcC1zdGF0ZW1lbnRcclxuICAgICAgICBmb3IgKGNvbnN0IFtwb3NpdGlvbiwgaGl0XSBvZiBPYmplY3QuZW50cmllcyhzZWFyY2hSZXNwb25zZS5oaXRzKSkge1xyXG4gICAgICAgICAgICBpZiAoaGl0Lm9iamVjdElEID09PSBvYmplY3RJRCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlSW50KHBvc2l0aW9uLCAxMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgfTtcclxufTtcblxuY29uc3QgZ2V0T2JqZWN0cyA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKG9iamVjdElEcywgcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICBjb25zdCB7IGF0dHJpYnV0ZXNUb1JldHJpZXZlLCAuLi5vcHRpb25zIH0gPSByZXF1ZXN0T3B0aW9ucyB8fCB7fTtcclxuICAgICAgICBjb25zdCByZXF1ZXN0cyA9IG9iamVjdElEcy5tYXAob2JqZWN0SUQgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgaW5kZXhOYW1lOiBiYXNlLmluZGV4TmFtZSxcclxuICAgICAgICAgICAgICAgIG9iamVjdElELFxyXG4gICAgICAgICAgICAgICAgLi4uKGF0dHJpYnV0ZXNUb1JldHJpZXZlID8geyBhdHRyaWJ1dGVzVG9SZXRyaWV2ZSB9IDoge30pLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBiYXNlLnRyYW5zcG9ydGVyLnJlYWQoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uUG9zdCxcclxuICAgICAgICAgICAgcGF0aDogJzEvaW5kZXhlcy8qL29iamVjdHMnLFxyXG4gICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0cyxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9LCBvcHRpb25zKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IGdldFJ1bGUgPSAoYmFzZSkgPT4ge1xyXG4gICAgcmV0dXJuIChvYmplY3RJRCwgcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICByZXR1cm4gYmFzZS50cmFuc3BvcnRlci5yZWFkKHtcclxuICAgICAgICAgICAgbWV0aG9kOiBNZXRob2RFbnVtLkdldCxcclxuICAgICAgICAgICAgcGF0aDogZW5jb2RlKCcxL2luZGV4ZXMvJXMvcnVsZXMvJXMnLCBiYXNlLmluZGV4TmFtZSwgb2JqZWN0SUQpLFxyXG4gICAgICAgIH0sIHJlcXVlc3RPcHRpb25zKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IGdldFNldHRpbmdzID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAocmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICByZXR1cm4gYmFzZS50cmFuc3BvcnRlci5yZWFkKHtcclxuICAgICAgICAgICAgbWV0aG9kOiBNZXRob2RFbnVtLkdldCxcclxuICAgICAgICAgICAgcGF0aDogZW5jb2RlKCcxL2luZGV4ZXMvJXMvc2V0dGluZ3MnLCBiYXNlLmluZGV4TmFtZSksXHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIGdldFZlcnNpb246IDIsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSwgcmVxdWVzdE9wdGlvbnMpO1xyXG4gICAgfTtcclxufTtcblxuY29uc3QgZ2V0U3lub255bSA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKG9iamVjdElELCByZXF1ZXN0T3B0aW9ucykgPT4ge1xyXG4gICAgICAgIHJldHVybiBiYXNlLnRyYW5zcG9ydGVyLnJlYWQoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uR2V0LFxyXG4gICAgICAgICAgICBwYXRoOiBlbmNvZGUoYDEvaW5kZXhlcy8lcy9zeW5vbnltcy8lc2AsIGJhc2UuaW5kZXhOYW1lLCBvYmplY3RJRCksXHJcbiAgICAgICAgfSwgcmVxdWVzdE9wdGlvbnMpO1xyXG4gICAgfTtcclxufTtcblxuY29uc3QgZ2V0VGFzayA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKHRhc2tJRCwgcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICByZXR1cm4gYmFzZS50cmFuc3BvcnRlci5yZWFkKHtcclxuICAgICAgICAgICAgbWV0aG9kOiBNZXRob2RFbnVtLkdldCxcclxuICAgICAgICAgICAgcGF0aDogZW5jb2RlKCcxL2luZGV4ZXMvJXMvdGFzay8lcycsIGJhc2UuaW5kZXhOYW1lLCB0YXNrSUQudG9TdHJpbmcoKSksXHJcbiAgICAgICAgfSwgcmVxdWVzdE9wdGlvbnMpO1xyXG4gICAgfTtcclxufTtcblxuY29uc3QgcGFydGlhbFVwZGF0ZU9iamVjdCA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKG9iamVjdCwgcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICByZXR1cm4gY3JlYXRlV2FpdGFibGVQcm9taXNlKHBhcnRpYWxVcGRhdGVPYmplY3RzKGJhc2UpKFtvYmplY3RdLCByZXF1ZXN0T3B0aW9ucykudGhlbihyZXNwb25zZSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBvYmplY3RJRDogcmVzcG9uc2Uub2JqZWN0SURzWzBdLFxyXG4gICAgICAgICAgICAgICAgdGFza0lEOiByZXNwb25zZS50YXNrSURzWzBdLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pLCAocmVzcG9uc2UsIHdhaXRSZXF1ZXN0T3B0aW9ucykgPT4gd2FpdFRhc2soYmFzZSkocmVzcG9uc2UudGFza0lELCB3YWl0UmVxdWVzdE9wdGlvbnMpKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IHBhcnRpYWxVcGRhdGVPYmplY3RzID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAob2JqZWN0cywgcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICBjb25zdCB7IGNyZWF0ZUlmTm90RXhpc3RzLCAuLi5vcHRpb25zIH0gPSByZXF1ZXN0T3B0aW9ucyB8fCB7fTtcclxuICAgICAgICBjb25zdCBhY3Rpb24gPSBjcmVhdGVJZk5vdEV4aXN0c1xyXG4gICAgICAgICAgICA/IEJhdGNoQWN0aW9uRW51bS5QYXJ0aWFsVXBkYXRlT2JqZWN0XHJcbiAgICAgICAgICAgIDogQmF0Y2hBY3Rpb25FbnVtLlBhcnRpYWxVcGRhdGVPYmplY3ROb0NyZWF0ZTtcclxuICAgICAgICByZXR1cm4gY2h1bmtlZEJhdGNoKGJhc2UpKG9iamVjdHMsIGFjdGlvbiwgb3B0aW9ucyk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCByZXBsYWNlQWxsT2JqZWN0cyA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKG9iamVjdHMsIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgY29uc3QgeyBzYWZlLCBhdXRvR2VuZXJhdGVPYmplY3RJRElmTm90RXhpc3QsIGJhdGNoU2l6ZSwgLi4ub3B0aW9ucyB9ID0gcmVxdWVzdE9wdGlvbnMgfHwge307XHJcbiAgICAgICAgY29uc3Qgb3BlcmF0aW9uID0gKGZyb20sIHRvLCB0eXBlLCBvcGVyYXRpb25SZXF1ZXN0T3B0aW9ucykgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gY3JlYXRlV2FpdGFibGVQcm9taXNlKGJhc2UudHJhbnNwb3J0ZXIud3JpdGUoe1xyXG4gICAgICAgICAgICAgICAgbWV0aG9kOiBNZXRob2RFbnVtLlBvc3QsXHJcbiAgICAgICAgICAgICAgICBwYXRoOiBlbmNvZGUoJzEvaW5kZXhlcy8lcy9vcGVyYXRpb24nLCBmcm9tKSxcclxuICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICBvcGVyYXRpb246IHR5cGUsXHJcbiAgICAgICAgICAgICAgICAgICAgZGVzdGluYXRpb246IHRvLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfSwgb3BlcmF0aW9uUmVxdWVzdE9wdGlvbnMpLCAocmVzcG9uc2UsIHdhaXRSZXF1ZXN0T3B0aW9ucykgPT4gd2FpdFRhc2soYmFzZSkocmVzcG9uc2UudGFza0lELCB3YWl0UmVxdWVzdE9wdGlvbnMpKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbnN0IHJhbmRvbVN1ZmZpeCA9IE1hdGgucmFuZG9tKClcclxuICAgICAgICAgICAgLnRvU3RyaW5nKDM2KVxyXG4gICAgICAgICAgICAuc3Vic3RyaW5nKDcpO1xyXG4gICAgICAgIGNvbnN0IHRlbXBvcmFyeUluZGV4TmFtZSA9IGAke2Jhc2UuaW5kZXhOYW1lfV90bXBfJHtyYW5kb21TdWZmaXh9YDtcclxuICAgICAgICBjb25zdCBzYXZlT2JqZWN0c0luVGVtcG9yYXJ5ID0gc2F2ZU9iamVjdHMoe1xyXG4gICAgICAgICAgICBhcHBJZDogYmFzZS5hcHBJZCxcclxuICAgICAgICAgICAgdHJhbnNwb3J0ZXI6IGJhc2UudHJhbnNwb3J0ZXIsXHJcbiAgICAgICAgICAgIGluZGV4TmFtZTogdGVtcG9yYXJ5SW5kZXhOYW1lLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJlZmVyLWNvbnN0LCBmdW5jdGlvbmFsL25vLWxldCwgZnVuY3Rpb25hbC9wcmVmZXItcmVhZG9ubHktdHlwZVxyXG4gICAgICAgIGxldCByZXNwb25zZXMgPSBbXTtcclxuICAgICAgICBjb25zdCBjb3B5V2FpdGFibGVQcm9taXNlID0gb3BlcmF0aW9uKGJhc2UuaW5kZXhOYW1lLCB0ZW1wb3JhcnlJbmRleE5hbWUsICdjb3B5Jywge1xyXG4gICAgICAgICAgICAuLi5vcHRpb25zLFxyXG4gICAgICAgICAgICBzY29wZTogWydzZXR0aW5ncycsICdzeW5vbnltcycsICdydWxlcyddLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jdGlvbmFsL2ltbXV0YWJsZS1kYXRhXHJcbiAgICAgICAgcmVzcG9uc2VzLnB1c2goY29weVdhaXRhYmxlUHJvbWlzZSk7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gKHNhZmVcclxuICAgICAgICAgICAgPyBjb3B5V2FpdGFibGVQcm9taXNlLndhaXQob3B0aW9ucylcclxuICAgICAgICAgICAgOiBjb3B5V2FpdGFibGVQcm9taXNlKVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNhdmVPYmplY3RzV2FpdGFibGVQcm9taXNlID0gc2F2ZU9iamVjdHNJblRlbXBvcmFyeShvYmplY3RzLCB7XHJcbiAgICAgICAgICAgICAgICAuLi5vcHRpb25zLFxyXG4gICAgICAgICAgICAgICAgYXV0b0dlbmVyYXRlT2JqZWN0SURJZk5vdEV4aXN0LFxyXG4gICAgICAgICAgICAgICAgYmF0Y2hTaXplLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmN0aW9uYWwvaW1tdXRhYmxlLWRhdGFcclxuICAgICAgICAgICAgcmVzcG9uc2VzLnB1c2goc2F2ZU9iamVjdHNXYWl0YWJsZVByb21pc2UpO1xyXG4gICAgICAgICAgICByZXR1cm4gc2FmZSA/IHNhdmVPYmplY3RzV2FpdGFibGVQcm9taXNlLndhaXQob3B0aW9ucykgOiBzYXZlT2JqZWN0c1dhaXRhYmxlUHJvbWlzZTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vdmVXYWl0YWJsZVByb21pc2UgPSBvcGVyYXRpb24odGVtcG9yYXJ5SW5kZXhOYW1lLCBiYXNlLmluZGV4TmFtZSwgJ21vdmUnLCBvcHRpb25zKTtcclxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmN0aW9uYWwvaW1tdXRhYmxlLWRhdGFcclxuICAgICAgICAgICAgcmVzcG9uc2VzLnB1c2gobW92ZVdhaXRhYmxlUHJvbWlzZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBzYWZlID8gbW92ZVdhaXRhYmxlUHJvbWlzZS53YWl0KG9wdGlvbnMpIDogbW92ZVdhaXRhYmxlUHJvbWlzZTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiBQcm9taXNlLmFsbChyZXNwb25zZXMpKVxyXG4gICAgICAgICAgICAudGhlbigoW2NvcHlSZXNwb25zZSwgc2F2ZU9iamVjdHNSZXNwb25zZSwgbW92ZVJlc3BvbnNlXSkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgb2JqZWN0SURzOiBzYXZlT2JqZWN0c1Jlc3BvbnNlLm9iamVjdElEcyxcclxuICAgICAgICAgICAgICAgIHRhc2tJRHM6IFtjb3B5UmVzcG9uc2UudGFza0lELCAuLi5zYXZlT2JqZWN0c1Jlc3BvbnNlLnRhc2tJRHMsIG1vdmVSZXNwb25zZS50YXNrSURdLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBjcmVhdGVXYWl0YWJsZVByb21pc2UocmVzdWx0LCAoXywgd2FpdFJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChyZXNwb25zZXMubWFwKHJlc3BvbnNlID0+IHJlc3BvbnNlLndhaXQod2FpdFJlcXVlc3RPcHRpb25zKSkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxufTtcblxuY29uc3QgcmVwbGFjZUFsbFJ1bGVzID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAocnVsZXMsIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHNhdmVSdWxlcyhiYXNlKShydWxlcywge1xyXG4gICAgICAgICAgICAuLi5yZXF1ZXN0T3B0aW9ucyxcclxuICAgICAgICAgICAgY2xlYXJFeGlzdGluZ1J1bGVzOiB0cnVlLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxufTtcblxuY29uc3QgcmVwbGFjZUFsbFN5bm9ueW1zID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAoc3lub255bXMsIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHNhdmVTeW5vbnltcyhiYXNlKShzeW5vbnltcywge1xyXG4gICAgICAgICAgICAuLi5yZXF1ZXN0T3B0aW9ucyxcclxuICAgICAgICAgICAgY2xlYXJFeGlzdGluZ1N5bm9ueW1zOiB0cnVlLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxufTtcblxuY29uc3Qgc2F2ZU9iamVjdCA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKG9iamVjdCwgcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICByZXR1cm4gY3JlYXRlV2FpdGFibGVQcm9taXNlKHNhdmVPYmplY3RzKGJhc2UpKFtvYmplY3RdLCByZXF1ZXN0T3B0aW9ucykudGhlbihyZXNwb25zZSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBvYmplY3RJRDogcmVzcG9uc2Uub2JqZWN0SURzWzBdLFxyXG4gICAgICAgICAgICAgICAgdGFza0lEOiByZXNwb25zZS50YXNrSURzWzBdLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pLCAocmVzcG9uc2UsIHdhaXRSZXF1ZXN0T3B0aW9ucykgPT4gd2FpdFRhc2soYmFzZSkocmVzcG9uc2UudGFza0lELCB3YWl0UmVxdWVzdE9wdGlvbnMpKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IHNhdmVPYmplY3RzID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAob2JqZWN0cywgcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICBjb25zdCB7IGF1dG9HZW5lcmF0ZU9iamVjdElESWZOb3RFeGlzdCwgLi4ub3B0aW9ucyB9ID0gcmVxdWVzdE9wdGlvbnMgfHwge307XHJcbiAgICAgICAgY29uc3QgYWN0aW9uID0gYXV0b0dlbmVyYXRlT2JqZWN0SURJZk5vdEV4aXN0XHJcbiAgICAgICAgICAgID8gQmF0Y2hBY3Rpb25FbnVtLkFkZE9iamVjdFxyXG4gICAgICAgICAgICA6IEJhdGNoQWN0aW9uRW51bS5VcGRhdGVPYmplY3Q7XHJcbiAgICAgICAgaWYgKGFjdGlvbiA9PT0gQmF0Y2hBY3Rpb25FbnVtLlVwZGF0ZU9iamVjdCkge1xyXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuY3Rpb25hbC9uby1sb29wLXN0YXRlbWVudFxyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IG9iamVjdCBvZiBvYmplY3RzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAob2JqZWN0Lm9iamVjdElEID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3JlYXRlV2FpdGFibGVQcm9taXNlKFByb21pc2UucmVqZWN0KGNyZWF0ZU1pc3NpbmdPYmplY3RJREVycm9yKCkpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY2h1bmtlZEJhdGNoKGJhc2UpKG9iamVjdHMsIGFjdGlvbiwgb3B0aW9ucyk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBzYXZlUnVsZSA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKHJ1bGUsIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHNhdmVSdWxlcyhiYXNlKShbcnVsZV0sIHJlcXVlc3RPcHRpb25zKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IHNhdmVSdWxlcyA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKHJ1bGVzLCByZXF1ZXN0T3B0aW9ucykgPT4ge1xyXG4gICAgICAgIGNvbnN0IHsgZm9yd2FyZFRvUmVwbGljYXMsIGNsZWFyRXhpc3RpbmdSdWxlcywgLi4ub3B0aW9ucyB9ID0gcmVxdWVzdE9wdGlvbnMgfHwge307XHJcbiAgICAgICAgY29uc3QgbWFwcGVkUmVxdWVzdE9wdGlvbnMgPSBjcmVhdGVNYXBwZWRSZXF1ZXN0T3B0aW9ucyhvcHRpb25zKTtcclxuICAgICAgICBpZiAoZm9yd2FyZFRvUmVwbGljYXMpIHtcclxuICAgICAgICAgICAgbWFwcGVkUmVxdWVzdE9wdGlvbnMucXVlcnlQYXJhbWV0ZXJzLmZvcndhcmRUb1JlcGxpY2FzID0gMTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBmdW5jdGlvbmFsL2ltbXV0YWJsZS1kYXRhXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjbGVhckV4aXN0aW5nUnVsZXMpIHtcclxuICAgICAgICAgICAgbWFwcGVkUmVxdWVzdE9wdGlvbnMucXVlcnlQYXJhbWV0ZXJzLmNsZWFyRXhpc3RpbmdSdWxlcyA9IDE7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgZnVuY3Rpb25hbC9pbW11dGFibGUtZGF0YVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY3JlYXRlV2FpdGFibGVQcm9taXNlKGJhc2UudHJhbnNwb3J0ZXIud3JpdGUoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uUG9zdCxcclxuICAgICAgICAgICAgcGF0aDogZW5jb2RlKCcxL2luZGV4ZXMvJXMvcnVsZXMvYmF0Y2gnLCBiYXNlLmluZGV4TmFtZSksXHJcbiAgICAgICAgICAgIGRhdGE6IHJ1bGVzLFxyXG4gICAgICAgIH0sIG1hcHBlZFJlcXVlc3RPcHRpb25zKSwgKHJlc3BvbnNlLCB3YWl0UmVxdWVzdE9wdGlvbnMpID0+IHdhaXRUYXNrKGJhc2UpKHJlc3BvbnNlLnRhc2tJRCwgd2FpdFJlcXVlc3RPcHRpb25zKSk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBzYXZlU3lub255bSA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKHN5bm9ueW0sIHJlcXVlc3RPcHRpb25zKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHNhdmVTeW5vbnltcyhiYXNlKShbc3lub255bV0sIHJlcXVlc3RPcHRpb25zKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IHNhdmVTeW5vbnltcyA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKHN5bm9ueW1zLCByZXF1ZXN0T3B0aW9ucykgPT4ge1xyXG4gICAgICAgIGNvbnN0IHsgZm9yd2FyZFRvUmVwbGljYXMsIGNsZWFyRXhpc3RpbmdTeW5vbnltcywgcmVwbGFjZUV4aXN0aW5nU3lub255bXMsIC4uLm9wdGlvbnMgfSA9IHJlcXVlc3RPcHRpb25zIHx8IHt9O1xyXG4gICAgICAgIGNvbnN0IG1hcHBlZFJlcXVlc3RPcHRpb25zID0gY3JlYXRlTWFwcGVkUmVxdWVzdE9wdGlvbnMob3B0aW9ucyk7XHJcbiAgICAgICAgaWYgKGZvcndhcmRUb1JlcGxpY2FzKSB7XHJcbiAgICAgICAgICAgIG1hcHBlZFJlcXVlc3RPcHRpb25zLnF1ZXJ5UGFyYW1ldGVycy5mb3J3YXJkVG9SZXBsaWNhcyA9IDE7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgZnVuY3Rpb25hbC9pbW11dGFibGUtZGF0YVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocmVwbGFjZUV4aXN0aW5nU3lub255bXMgfHwgY2xlYXJFeGlzdGluZ1N5bm9ueW1zKSB7XHJcbiAgICAgICAgICAgIG1hcHBlZFJlcXVlc3RPcHRpb25zLnF1ZXJ5UGFyYW1ldGVycy5yZXBsYWNlRXhpc3RpbmdTeW5vbnltcyA9IDE7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgZnVuY3Rpb25hbC9pbW11dGFibGUtZGF0YVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY3JlYXRlV2FpdGFibGVQcm9taXNlKGJhc2UudHJhbnNwb3J0ZXIud3JpdGUoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uUG9zdCxcclxuICAgICAgICAgICAgcGF0aDogZW5jb2RlKCcxL2luZGV4ZXMvJXMvc3lub255bXMvYmF0Y2gnLCBiYXNlLmluZGV4TmFtZSksXHJcbiAgICAgICAgICAgIGRhdGE6IHN5bm9ueW1zLFxyXG4gICAgICAgIH0sIG1hcHBlZFJlcXVlc3RPcHRpb25zKSwgKHJlc3BvbnNlLCB3YWl0UmVxdWVzdE9wdGlvbnMpID0+IHdhaXRUYXNrKGJhc2UpKHJlc3BvbnNlLnRhc2tJRCwgd2FpdFJlcXVlc3RPcHRpb25zKSk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBzZWFyY2ggPSAoYmFzZSkgPT4ge1xyXG4gICAgcmV0dXJuIChxdWVyeSwgcmVxdWVzdE9wdGlvbnMpID0+IHtcclxuICAgICAgICByZXR1cm4gYmFzZS50cmFuc3BvcnRlci5yZWFkKHtcclxuICAgICAgICAgICAgbWV0aG9kOiBNZXRob2RFbnVtLlBvc3QsXHJcbiAgICAgICAgICAgIHBhdGg6IGVuY29kZSgnMS9pbmRleGVzLyVzL3F1ZXJ5JywgYmFzZS5pbmRleE5hbWUpLFxyXG4gICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICBxdWVyeSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgY2FjaGVhYmxlOiB0cnVlLFxyXG4gICAgICAgIH0sIHJlcXVlc3RPcHRpb25zKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IHNlYXJjaEZvckZhY2V0VmFsdWVzID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAoZmFjZXROYW1lLCBmYWNldFF1ZXJ5LCByZXF1ZXN0T3B0aW9ucykgPT4ge1xyXG4gICAgICAgIHJldHVybiBiYXNlLnRyYW5zcG9ydGVyLnJlYWQoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uUG9zdCxcclxuICAgICAgICAgICAgcGF0aDogZW5jb2RlKCcxL2luZGV4ZXMvJXMvZmFjZXRzLyVzL3F1ZXJ5JywgYmFzZS5pbmRleE5hbWUsIGZhY2V0TmFtZSksXHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIGZhY2V0UXVlcnksXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNhY2hlYWJsZTogdHJ1ZSxcclxuICAgICAgICB9LCByZXF1ZXN0T3B0aW9ucyk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBzZWFyY2hSdWxlcyA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKHF1ZXJ5LCByZXF1ZXN0T3B0aW9ucykgPT4ge1xyXG4gICAgICAgIHJldHVybiBiYXNlLnRyYW5zcG9ydGVyLnJlYWQoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uUG9zdCxcclxuICAgICAgICAgICAgcGF0aDogZW5jb2RlKCcxL2luZGV4ZXMvJXMvcnVsZXMvc2VhcmNoJywgYmFzZS5pbmRleE5hbWUpLFxyXG4gICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICBxdWVyeSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9LCByZXF1ZXN0T3B0aW9ucyk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBzZWFyY2hTeW5vbnltcyA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKHF1ZXJ5LCByZXF1ZXN0T3B0aW9ucykgPT4ge1xyXG4gICAgICAgIHJldHVybiBiYXNlLnRyYW5zcG9ydGVyLnJlYWQoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uUG9zdCxcclxuICAgICAgICAgICAgcGF0aDogZW5jb2RlKCcxL2luZGV4ZXMvJXMvc3lub255bXMvc2VhcmNoJywgYmFzZS5pbmRleE5hbWUpLFxyXG4gICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICBxdWVyeSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9LCByZXF1ZXN0T3B0aW9ucyk7XHJcbiAgICB9O1xyXG59O1xuXG5jb25zdCBzZXRTZXR0aW5ncyA9IChiYXNlKSA9PiB7XHJcbiAgICByZXR1cm4gKHNldHRpbmdzLCByZXF1ZXN0T3B0aW9ucykgPT4ge1xyXG4gICAgICAgIGNvbnN0IHsgZm9yd2FyZFRvUmVwbGljYXMsIC4uLm9wdGlvbnMgfSA9IHJlcXVlc3RPcHRpb25zIHx8IHt9O1xyXG4gICAgICAgIGNvbnN0IG1hcHBlZFJlcXVlc3RPcHRpb25zID0gY3JlYXRlTWFwcGVkUmVxdWVzdE9wdGlvbnMob3B0aW9ucyk7XHJcbiAgICAgICAgaWYgKGZvcndhcmRUb1JlcGxpY2FzKSB7XHJcbiAgICAgICAgICAgIG1hcHBlZFJlcXVlc3RPcHRpb25zLnF1ZXJ5UGFyYW1ldGVycy5mb3J3YXJkVG9SZXBsaWNhcyA9IDE7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgZnVuY3Rpb25hbC9pbW11dGFibGUtZGF0YVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY3JlYXRlV2FpdGFibGVQcm9taXNlKGJhc2UudHJhbnNwb3J0ZXIud3JpdGUoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IE1ldGhvZEVudW0uUHV0LFxyXG4gICAgICAgICAgICBwYXRoOiBlbmNvZGUoJzEvaW5kZXhlcy8lcy9zZXR0aW5ncycsIGJhc2UuaW5kZXhOYW1lKSxcclxuICAgICAgICAgICAgZGF0YTogc2V0dGluZ3MsXHJcbiAgICAgICAgfSwgbWFwcGVkUmVxdWVzdE9wdGlvbnMpLCAocmVzcG9uc2UsIHdhaXRSZXF1ZXN0T3B0aW9ucykgPT4gd2FpdFRhc2soYmFzZSkocmVzcG9uc2UudGFza0lELCB3YWl0UmVxdWVzdE9wdGlvbnMpKTtcclxuICAgIH07XHJcbn07XG5cbmNvbnN0IHdhaXRUYXNrID0gKGJhc2UpID0+IHtcclxuICAgIHJldHVybiAodGFza0lELCByZXF1ZXN0T3B0aW9ucykgPT4ge1xyXG4gICAgICAgIHJldHVybiBjcmVhdGVSZXRyeWFibGVQcm9taXNlKHJldHJ5ID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIGdldFRhc2soYmFzZSkodGFza0lELCByZXF1ZXN0T3B0aW9ucykudGhlbihyZXNwb25zZSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2Uuc3RhdHVzICE9PSAncHVibGlzaGVkJyA/IHJldHJ5KCkgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxufTtcblxuY29uc3QgQXBpS2V5QUNMRW51bSA9IHtcclxuICAgIEFkZE9iamVjdDogJ2FkZE9iamVjdCcsXHJcbiAgICBBbmFseXRpY3M6ICdhbmFseXRpY3MnLFxyXG4gICAgQnJvd3NlcjogJ2Jyb3dzZScsXHJcbiAgICBEZWxldGVJbmRleDogJ2RlbGV0ZUluZGV4JyxcclxuICAgIERlbGV0ZU9iamVjdDogJ2RlbGV0ZU9iamVjdCcsXHJcbiAgICBFZGl0U2V0dGluZ3M6ICdlZGl0U2V0dGluZ3MnLFxyXG4gICAgSW5mZXJlbmNlOiAnaW5mZXJlbmNlJyxcclxuICAgIExpc3RJbmRleGVzOiAnbGlzdEluZGV4ZXMnLFxyXG4gICAgTG9nczogJ2xvZ3MnLFxyXG4gICAgUGVyc29uYWxpemF0aW9uOiAncGVyc29uYWxpemF0aW9uJyxcclxuICAgIFJlY29tbWVuZGF0aW9uOiAncmVjb21tZW5kYXRpb24nLFxyXG4gICAgU2VhcmNoOiAnc2VhcmNoJyxcclxuICAgIFNlZVVucmV0cmlldmFibGVBdHRyaWJ1dGVzOiAnc2VlVW5yZXRyaWV2YWJsZUF0dHJpYnV0ZXMnLFxyXG4gICAgU2V0dGluZ3M6ICdzZXR0aW5ncycsXHJcbiAgICBVc2FnZTogJ3VzYWdlJyxcclxufTtcblxuY29uc3QgQmF0Y2hBY3Rpb25FbnVtID0ge1xyXG4gICAgQWRkT2JqZWN0OiAnYWRkT2JqZWN0JyxcclxuICAgIFVwZGF0ZU9iamVjdDogJ3VwZGF0ZU9iamVjdCcsXHJcbiAgICBQYXJ0aWFsVXBkYXRlT2JqZWN0OiAncGFydGlhbFVwZGF0ZU9iamVjdCcsXHJcbiAgICBQYXJ0aWFsVXBkYXRlT2JqZWN0Tm9DcmVhdGU6ICdwYXJ0aWFsVXBkYXRlT2JqZWN0Tm9DcmVhdGUnLFxyXG4gICAgRGVsZXRlT2JqZWN0OiAnZGVsZXRlT2JqZWN0JyxcclxuICAgIERlbGV0ZUluZGV4OiAnZGVsZXRlJyxcclxuICAgIENsZWFySW5kZXg6ICdjbGVhcicsXHJcbn07XG5cbmNvbnN0IFNjb3BlRW51bSA9IHtcclxuICAgIFNldHRpbmdzOiAnc2V0dGluZ3MnLFxyXG4gICAgU3lub255bXM6ICdzeW5vbnltcycsXHJcbiAgICBSdWxlczogJ3J1bGVzJyxcclxufTtcblxuY29uc3QgU3RyYXRlZ3lFbnVtID0ge1xyXG4gICAgTm9uZTogJ25vbmUnLFxyXG4gICAgU3RvcElmRW5vdWdoTWF0Y2hlczogJ3N0b3BJZkVub3VnaE1hdGNoZXMnLFxyXG59O1xuXG5jb25zdCBTeW5vbnltRW51bSA9IHtcclxuICAgIFN5bm9ueW06ICdzeW5vbnltJyxcclxuICAgIE9uZVdheVN5bm9ueW06ICdvbmVXYXlTeW5vbnltJyxcclxuICAgIEFsdENvcnJlY3Rpb24xOiAnYWx0Q29ycmVjdGlvbjEnLFxyXG4gICAgQWx0Q29ycmVjdGlvbjI6ICdhbHRDb3JyZWN0aW9uMicsXHJcbiAgICBQbGFjZWhvbGRlcjogJ3BsYWNlaG9sZGVyJyxcclxufTtcblxuZXhwb3J0IHsgQXBpS2V5QUNMRW51bSwgQmF0Y2hBY3Rpb25FbnVtLCBTY29wZUVudW0sIFN0cmF0ZWd5RW51bSwgU3lub255bUVudW0sIGFkZEFwaUtleSwgYXNzaWduVXNlcklELCBhc3NpZ25Vc2VySURzLCBiYXRjaCwgYnJvd3NlT2JqZWN0cywgYnJvd3NlUnVsZXMsIGJyb3dzZVN5bm9ueW1zLCBjaHVua2VkQmF0Y2gsIGNsZWFyRGljdGlvbmFyeUVudHJpZXMsIGNsZWFyT2JqZWN0cywgY2xlYXJSdWxlcywgY2xlYXJTeW5vbnltcywgY29weUluZGV4LCBjb3B5UnVsZXMsIGNvcHlTZXR0aW5ncywgY29weVN5bm9ueW1zLCBjcmVhdGVCcm93c2FibGVQcm9taXNlLCBjcmVhdGVNaXNzaW5nT2JqZWN0SURFcnJvciwgY3JlYXRlT2JqZWN0Tm90Rm91bmRFcnJvciwgY3JlYXRlU2VhcmNoQ2xpZW50LCBjcmVhdGVWYWxpZFVudGlsTm90Rm91bmRFcnJvciwgY3VzdG9tUmVxdWVzdCwgZGVsZXRlQXBpS2V5LCBkZWxldGVCeSwgZGVsZXRlRGljdGlvbmFyeUVudHJpZXMsIGRlbGV0ZUluZGV4LCBkZWxldGVPYmplY3QsIGRlbGV0ZU9iamVjdHMsIGRlbGV0ZVJ1bGUsIGRlbGV0ZVN5bm9ueW0sIGV4aXN0cywgZmluZEFuc3dlcnMsIGZpbmRPYmplY3QsIGdlbmVyYXRlU2VjdXJlZEFwaUtleSwgZ2V0QXBpS2V5LCBnZXRBcHBUYXNrLCBnZXREaWN0aW9uYXJ5U2V0dGluZ3MsIGdldExvZ3MsIGdldE9iamVjdCwgZ2V0T2JqZWN0UG9zaXRpb24sIGdldE9iamVjdHMsIGdldFJ1bGUsIGdldFNlY3VyZWRBcGlLZXlSZW1haW5pbmdWYWxpZGl0eSwgZ2V0U2V0dGluZ3MsIGdldFN5bm9ueW0sIGdldFRhc2ssIGdldFRvcFVzZXJJRHMsIGdldFVzZXJJRCwgaGFzUGVuZGluZ01hcHBpbmdzLCBpbml0SW5kZXgsIGxpc3RBcGlLZXlzLCBsaXN0Q2x1c3RlcnMsIGxpc3RJbmRpY2VzLCBsaXN0VXNlcklEcywgbW92ZUluZGV4LCBtdWx0aXBsZUJhdGNoLCBtdWx0aXBsZUdldE9iamVjdHMsIG11bHRpcGxlUXVlcmllcywgbXVsdGlwbGVTZWFyY2hGb3JGYWNldFZhbHVlcywgcGFydGlhbFVwZGF0ZU9iamVjdCwgcGFydGlhbFVwZGF0ZU9iamVjdHMsIHJlbW92ZVVzZXJJRCwgcmVwbGFjZUFsbE9iamVjdHMsIHJlcGxhY2VBbGxSdWxlcywgcmVwbGFjZUFsbFN5bm9ueW1zLCByZXBsYWNlRGljdGlvbmFyeUVudHJpZXMsIHJlc3RvcmVBcGlLZXksIHNhdmVEaWN0aW9uYXJ5RW50cmllcywgc2F2ZU9iamVjdCwgc2F2ZU9iamVjdHMsIHNhdmVSdWxlLCBzYXZlUnVsZXMsIHNhdmVTeW5vbnltLCBzYXZlU3lub255bXMsIHNlYXJjaCwgc2VhcmNoRGljdGlvbmFyeUVudHJpZXMsIHNlYXJjaEZvckZhY2V0VmFsdWVzLCBzZWFyY2hSdWxlcywgc2VhcmNoU3lub255bXMsIHNlYXJjaFVzZXJJRHMsIHNldERpY3Rpb25hcnlTZXR0aW5ncywgc2V0U2V0dGluZ3MsIHVwZGF0ZUFwaUtleSwgd2FpdEFwcFRhc2ssIHdhaXRUYXNrIH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@algolia+client-search@4.24.0/node_modules/@algolia/client-search/dist/client-search.esm.js\n");

/***/ })

};
;